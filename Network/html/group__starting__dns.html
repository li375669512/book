<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Control Interface</title>
<title>Network Component: Control Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 7.15.0</span>
   </div>
   <div id="projectbrief">MDK Middleware for IPv4 and IPv6 Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__starting__dns.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Control Interface<div class="ingroups"><a class="el" href="group__net_d_n_sc___func.html">DNS Client</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions to start the DNS Client.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaaa2001ec26cef7e8a35ddc989de83449"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__starting__dns.html#gaaa2001ec26cef7e8a35ddc989de83449">netDNSc_cb_t</a> )(<a class="el" href="group__net_d_n_s___enums.html#gaa07048e699221e6b866af0c79e490ceb">netDNSc_Event</a> event, const <a class="el" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr)</td></tr>
<tr class="memdesc:gaaa2001ec26cef7e8a35ddc989de83449"><td class="mdescLeft">&#160;</td><td class="mdescRight">DNS Client Event callback function.  <a href="#gaaa2001ec26cef7e8a35ddc989de83449">More...</a><br/></td></tr>
<tr class="separator:gaaa2001ec26cef7e8a35ddc989de83449"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8ec9f1d13d74321604819950a63fa3a4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__starting__dns.html#ga8ec9f1d13d74321604819950a63fa3a4">netDNSc_GetHostByName</a> (const char *name, int16_t addr_type, <a class="el" href="group__starting__dns.html#gaaa2001ec26cef7e8a35ddc989de83449">netDNSc_cb_t</a> cb_func)</td></tr>
<tr class="memdesc:ga8ec9f1d13d74321604819950a63fa3a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolve IP address of a host from a hostname. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <a href="#ga8ec9f1d13d74321604819950a63fa3a4">More...</a><br/></td></tr>
<tr class="separator:ga8ec9f1d13d74321604819950a63fa3a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabdfb833d5ee0ce0be704b3dceb00fecd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__starting__dns.html#gabdfb833d5ee0ce0be704b3dceb00fecd">netDNSc_GetHostByNameX</a> (const char *name, int16_t addr_type, <a class="el" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr)</td></tr>
<tr class="memdesc:gabdfb833d5ee0ce0be704b3dceb00fecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolve IP address of a host from a hostname in blocking mode. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <a href="#gabdfb833d5ee0ce0be704b3dceb00fecd">More...</a><br/></td></tr>
<tr class="separator:gabdfb833d5ee0ce0be704b3dceb00fecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6daff93d44ff6c6538457a3763c0c1b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__starting__dns.html#ga6daff93d44ff6c6538457a3763c0c1b0">netDNSc_ClearCache</a> (void)</td></tr>
<tr class="memdesc:ga6daff93d44ff6c6538457a3763c0c1b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush or clear the local DNS cache. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <a href="#ga6daff93d44ff6c6538457a3763c0c1b0">More...</a><br/></td></tr>
<tr class="separator:ga6daff93d44ff6c6538457a3763c0c1b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Functions to start the DNS Client. </p>
<p>Start the DNS Client by calling the function <a class="el" href="group__starting__dns.html#ga8ec9f1d13d74321604819950a63fa3a4">netDNSc_GetHostByName</a>. DNS requests are routed to the DNS Server IP address of an active network interface. If you are using a <a class="el" href="group__net_p_p_p___func.html">PPP</a> or <a class="el" href="group__net_s_l_i_p___func.html">SLIP</a> interface and no <a class="el" href="group__net_e_t_h___func.html">Ethernet Interface</a> interface, you must enable the "Use default Gateway on remote Network" option in the configuration file (<b>Net_Config_PPP.h</b> or <b>Net_Config_SLIP.h</b>).</p>
<p>You must also specify a callback function, which is called from the DNS Client when a DNS event occurs. </p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> dns_cbfunc (<a class="code" href="group__net_d_n_s___enums.html#gaa07048e699221e6b866af0c79e490ceb">netDNSc_Event</a> event, <span class="keyword">const</span> <a class="code" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr) {</div>
<div class="line">  <span class="keywordtype">char</span> ip_ascii[40];</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (event) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebaf7ef5ca4c31fc27a830aa9c84c70be73">netDNSc_EventSuccess</a>:</div>
<div class="line">      <span class="comment">// Host Address successfully resolved.</span></div>
<div class="line">      <a class="code" href="group__net_gen___addr_conv_func.html#ga546c7611025489af14f2b37dbda445c2">netIP_ntoa</a> (addr-&gt;<a class="code" href="group__network__structs.html#a0444de3555073772ebd025a838b9a911">addr_type</a>, addr-&gt;<a class="code" href="group__network__structs.html#a110c5dd7725b86823c9408661a3f854b">addr</a>, ip_ascii, sizeof (ip_ascii));</div>
<div class="line">      printf (<span class="stringliteral">&quot;IP Address: %s\n&quot;</span>, ip_ascii)</div>
<div class="line">      break;</div>
<div class="line">    case <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebac13eaffd178a4644999209105b654c91">netDNSc_EventTimeout</a>:</div>
<div class="line">      <span class="comment">// All DNS Resolver retries used up and timeouts expired.</span></div>
<div class="line">      printf (&quot;DNS Resolver Timeout expired, Host Address not resolved.\n&quot;);</div>
<div class="line">      break;</div>
<div class="line">    case <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebaaeac8c96a63dd23b22f3257d14b05e1f">netDNSc_EventNotResolved</a>:</div>
<div class="line">      <span class="comment">// Host Name does not exist in DNS record database.</span></div>
<div class="line">      printf (&quot;Host name does not exist.\n&quot;);</div>
<div class="line">      break;</div>
<div class="line">    case <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebadd0f67f191d12f796bc4a89d64f9695e">netDNSc_EventError</a>:</div>
<div class="line">      <span class="comment">// DNS Protocol Error, invalid or corrupted reply received.</span></div>
<div class="line">      printf (&quot;DNS Resolver Protocol Error, Host Address not resolved.\n&quot;);</div>
<div class="line">      break;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>When the required host is found in the local DNS Cache, the callback function is called immediately with the result code <code></code> <span class="XML-Token">netDNSc_EventSuccess</span> and provides the IP address of the host to the function. In this case, no actual DNS request packet is sent to the remote DNS Server.</p>
<dl class="section note"><dt>Note</dt><dd>You can also provide the IP address in a string format to specify the host name. The DNS Client decodes it and returns the decoded IP address to the callback function. </dd></dl>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gaaa2001ec26cef7e8a35ddc989de83449"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* netDNSc_cb_t)(<a class="el" href="group__net_d_n_s___enums.html#gaa07048e699221e6b866af0c79e490ceb">netDNSc_Event</a> event, const <a class="el" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>DNS Client Event callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>DNS client event type as defined in <a class="el" href="group__net_d_n_s___enums.html#gaa07048e699221e6b866af0c79e490ceb">netDNSc_Event</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>Pointer to the structure containing resolved IP address of the host name. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none.</dd></dl>
<p>Is the type definition for the DNS callback function. The function is invoked by the DNS client when an event ends the DNS session. The DNS client specifies the event and the host IP address (in case of <span class="XML-Token">netDNSc_EventSuccess</span>) when calling the function.</p>
<p><b>Parameter for:</b></p>
<ul>
<li><a class="el" href="group__starting__dns.html#ga8ec9f1d13d74321604819950a63fa3a4">netDNSc_GetHostByName</a></li>
</ul>
<p><b>Code</b> <b>Example</b> </p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> dns_cbfunc (<a class="code" href="group__net_d_n_s___enums.html#gaa07048e699221e6b866af0c79e490ceb">netDNSc_Event</a> event, <span class="keyword">const</span> <a class="code" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr) {</div>
<div class="line">  <span class="keywordtype">char</span> ip_ascii[40];</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">switch</span> (event) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebaf7ef5ca4c31fc27a830aa9c84c70be73">netDNSc_EventSuccess</a>:</div>
<div class="line">      <span class="comment">// Host Address successfully resolved</span></div>
<div class="line">      <a class="code" href="group__net_gen___addr_conv_func.html#ga546c7611025489af14f2b37dbda445c2">netIP_ntoa</a> (addr-&gt;<a class="code" href="group__network__structs.html#a0444de3555073772ebd025a838b9a911">addr_type</a>, adr-&gt;addr, ip_ascii, <span class="keyword">sizeof</span>(ip_ascii));</div>
<div class="line">      printf(<span class="stringliteral">&quot;IP Address: %s\n&quot;</span>, ip_ascii);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebaaeac8c96a63dd23b22f3257d14b05e1f">netDNSc_EventNotResolved</a>:</div>
<div class="line">      <span class="comment">// Error, host name does not exist in DNS record database</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebac13eaffd178a4644999209105b654c91">netDNSc_EventTimeout</a>:</div>
<div class="line">      <span class="comment">// Error, DNS resolver timeout expired</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebadd0f67f191d12f796bc4a89d64f9695e">netDNSc_EventError</a>:</div>
<div class="line">      <span class="comment">// Error, DNS protocol error occurred</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6daff93d44ff6c6538457a3763c0c1b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netDNSc_ClearCache </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush or clear the local DNS cache. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netDNSc_ClearCache</b> flushes all resolved IP addresses from the local DNS cache. You can use this function when the cache holds outdated values that are no longer valid.</p>
<p>Possible <a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p>
<ul>
<li><em>netOK:</em> Operation completed successfully.</li>
<li><em>netBusy:</em> DNS client is busy.</li>
</ul>
<p><b>Code</b> <b>Example</b> </p>
<div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__starting__dns.html#ga6daff93d44ff6c6538457a3763c0c1b0">netDNSc_ClearCache</a> () == <a class="code" href="rl__net__ds_8h.html#ga5675a3b88ee02986ae15ae3bb8135551a138e73e2c0ad9ef9426ac81ef809953b">netOK</a>) {</div>
<div class="line">  <span class="comment">// All entries flushed from DNS cache</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga8ec9f1d13d74321604819950a63fa3a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netDNSc_GetHostByName </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>addr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__starting__dns.html#gaaa2001ec26cef7e8a35ddc989de83449">netDNSc_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolve IP address of a host from a hostname. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>hostname, a null-terminated string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr_type</td><td>network address type to resolve:<ul>
<li>NET_ADDR_IP4 = IPv4 address.</li>
<li>NET_ADDR_IP6 = IPv6 address. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_func</td><td>callback function to call, when DNS session ends. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The non-blocking function <b>netDNSc_GetHostByName</b> resolves the IP address of a host from a host name. It starts the DNS client and sends a request to the DNS server.</p>
<p>The argument <em>name</em> is a pointer to a <span class="XML-Token">null</span>-terminated string that specifies the host name. The argument <em>name</em> can also point to the dotted decimal IPv4 address in string format (for example "192.168.0.100"), or to the hexadecimal IPv6 address in string format (for example "2001:4860:4860::8888"). In this case, the DNS client calls the <em>cb_func</em> function immediately with the IP address. The argument <em>name</em> can also be "localhost", in this case the DNS client calls the <em>cb_func</em> function immediately with the loopback IP address: "127.0.0.1" for IPv4 or "::1" for IPv6.</p>
<p>The argument <em>addr_type</em> specifies the type of address to resolve. It is <a class="el" href="rl__net__ds_8h.html#ab5ae61a54f36e338a8dc06cee088d89f">NET_ADDR_IP4</a> when you want to resolve an IPv4 address, and <a class="el" href="rl__net__ds_8h.html#a5af8b5fa13b653a73d397cabe75ca4bb">NET_ADDR_IP6</a> when you want to resolve an IPv6 address.</p>
<p>The argument <em>cb_func</em> specifies a user-provided callback function. Refer to <a class="el" href="group__starting__dns.html#gaaa2001ec26cef7e8a35ddc989de83449">netDNSc_cb_t</a>.</p>
<p>Possible <a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p>
<ul>
<li><em>netOK:</em> DNS client started successfully.</li>
<li><em>netInvalidParameter:</em> Invalid parameter provided.</li>
<li><em>netBusy:</em> DNS client is busy.</li>
<li><em>netServerError:</em> DNS server IP address undefined.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The function <b>netDNSc_GetHostByName</b> is deprecated, use the <a class="el" href="group__starting__dns.html#gabdfb833d5ee0ce0be704b3dceb00fecd">netDNSc_GetHostByNameX</a> function instead.</dd></dl>
<p><b>Code</b> <b>Example</b> </p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> dns_cbfunc (<a class="code" href="group__net_d_n_s___enums.html#gaa07048e699221e6b866af0c79e490ceb">netDNSc_Event</a> event, <span class="keyword">const</span> <a class="code" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__starting__dns.html#ga8ec9f1d13d74321604819950a63fa3a4">netDNSc_GetHostByName</a> (<span class="stringliteral">&quot;www.arm.com&quot;</span>, <a class="code" href="rl__net__ds_8h.html#ab5ae61a54f36e338a8dc06cee088d89f">NET_ADDR_IP4</a>, dns_cbfunc) == <a class="code" href="rl__net__ds_8h.html#ga5675a3b88ee02986ae15ae3bb8135551a138e73e2c0ad9ef9426ac81ef809953b">netOK</a>) {</div>
<div class="line">  <span class="comment">// Started, will complete on callback notification</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> dns_cbfunc (<a class="code" href="group__net_d_n_s___enums.html#gaa07048e699221e6b866af0c79e490ceb">netDNSc_Event</a> event, <span class="keyword">const</span> <a class="code" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr) {</div>
<div class="line">  <span class="keywordtype">char</span> ip_ascii[40];</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">switch</span> (event) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebaf7ef5ca4c31fc27a830aa9c84c70be73">netDNSc_EventSuccess</a>:</div>
<div class="line">      <span class="comment">// Host Address successfully resolved</span></div>
<div class="line">      <a class="code" href="group__net_gen___addr_conv_func.html#ga546c7611025489af14f2b37dbda445c2">netIP_ntoa</a> (addr-&gt;<a class="code" href="group__network__structs.html#a0444de3555073772ebd025a838b9a911">addr_type</a>, adr-&gt;addr, ip_ascii, <span class="keyword">sizeof</span>(ip_ascii));</div>
<div class="line">      printf(<span class="stringliteral">&quot;IP Address: %s\n&quot;</span>, ip_ascii);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebaaeac8c96a63dd23b22f3257d14b05e1f">netDNSc_EventNotResolved</a>:</div>
<div class="line">      <span class="comment">// Error, host name does not exist in DNS record database</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebac13eaffd178a4644999209105b654c91">netDNSc_EventTimeout</a>:</div>
<div class="line">      <span class="comment">// Error, DNS resolver timeout expired</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net__ds_8h.html#gaa07048e699221e6b866af0c79e490cebadd0f67f191d12f796bc4a89d64f9695e">netDNSc_EventError</a>:</div>
<div class="line">      <span class="comment">// Error, DNS protocol error occurred</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gabdfb833d5ee0ce0be704b3dceb00fecd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netDNSc_GetHostByNameX </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>addr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolve IP address of a host from a hostname in blocking mode. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>hostname, a null-terminated string. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr_type</td><td>network address type to resolve:<ul>
<li>NET_ADDR_IP4 = IPv4 address.</li>
<li>NET_ADDR_IP6 = IPv6 address. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">addr</td><td>structure that will receive resolved IP address of the hostname. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The blocking function <b>netDNSc_GetHostByNameX</b> resolves the IP address of a host from a host name. It starts the DNS client, sends a request to the DNS server and returns the resolved IP address.</p>
<p>The argument <em>name</em> is a pointer to a <span class="XML-Token">null</span>-terminated string that specifies the host name. The argument <em>name</em> can also point to the dotted decimal IPv4 address in string format (for example "192.168.0.100"), or to the hexadecimal IPv6 address in string format (for example "2001:4860:4860::8888"). In this case, the DNS client calls the <em>cb_func</em> function immediately with the IP address. The argument <em>name</em> can also be "localhost", in this case the DNS client calls the <em>cb_func</em> function immediately with the loopback IP address: "127.0.0.1" for IPv4 or "::1" for IPv6.</p>
<p>The argument <em>addr_type</em> specifies the type of address to resolve. It is <a class="el" href="rl__net__ds_8h.html#ab5ae61a54f36e338a8dc06cee088d89f">NET_ADDR_IP4</a> when you want to resolve an IPv4 address, and <a class="el" href="rl__net__ds_8h.html#a5af8b5fa13b653a73d397cabe75ca4bb">NET_ADDR_IP6</a> when you want to resolve an IPv6 address.</p>
<p>The argument <em>addr</em> specifies a user-provided <a class="el" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> address structure that will receive the resolved IP address.</p>
<p>Possible <a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p>
<ul>
<li><em>netOK:</em> Host name successfully resolved.</li>
<li><em>netInvalidParameter:</em> Invalid parameter provided.</li>
<li><em>netDnsResolverError:</em> Host name not existing.</li>
<li><em>netTimeout:</em> DNS server not responding.</li>
<li><em>netServerError:</em> DNS server IP address undefined.</li>
</ul>
<p><b>Code</b> <b>Example</b> </p>
<div class="fragment"><div class="line"><a class="code" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> addr;</div>
<div class="line"><span class="keywordtype">char</span> ip_ascii[40];</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__starting__dns.html#gabdfb833d5ee0ce0be704b3dceb00fecd">netDNSc_GetHostByNameX</a> (<span class="stringliteral">&quot;www.arm.com&quot;</span>, <a class="code" href="rl__net__ds_8h.html#ab5ae61a54f36e338a8dc06cee088d89f">NET_ADDR_IP4</a>, &amp;addr) == <a class="code" href="rl__net__ds_8h.html#ga5675a3b88ee02986ae15ae3bb8135551a138e73e2c0ad9ef9426ac81ef809953b">netOK</a>) {</div>
<div class="line">  <span class="comment">// Success, &#39;addr&#39; holds resolved IP address</span></div>
<div class="line">  <a class="code" href="group__net_gen___addr_conv_func.html#ga546c7611025489af14f2b37dbda445c2">netIP_ntoa</a> (addr-&gt;<a class="code" href="group__network__structs.html#a0444de3555073772ebd025a838b9a911">addr_type</a>, adr-&gt;addr, ip_ascii, <span class="keyword">sizeof</span>(ip_ascii));</div>
<div class="line">  printf(<span class="stringliteral">&quot;IP Address: %s\n&quot;</span>, ip_ascii);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue May 25 2021 13:57:38 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
