<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Control Interface</title>
<title>Network Component: Control Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 7.15.0</span>
   </div>
   <div id="projectbrief">MDK Middleware for IPv4 and IPv6 Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__smtpc__user__api.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Control Interface<div class="ingroups"><a class="el" href="group__net_s_m_t_pc___func.html">SMTP Client</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions to connect to an SMTP server.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga33454db9427528430742f6863c22f871"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__smtpc__user__api.html#ga33454db9427528430742f6863c22f871">netSMTPc_Connect</a> (const <a class="el" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *addr)</td></tr>
<tr class="memdesc:ga33454db9427528430742f6863c22f871"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start SMTP client to send an email in legacy mode. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <a href="#ga33454db9427528430742f6863c22f871">More...</a><br/></td></tr>
<tr class="separator:ga33454db9427528430742f6863c22f871"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabb5265fa948e0bfded49cc7bf695ab5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__smtpc__user__api.html#gabb5265fa948e0bfded49cc7bf695ab5d">netSMTPc_SendMail</a> (const <a class="el" href="group__smtp__structs.html#struct_n_e_t___s_m_t_p___m_a_i_l">NET_SMTP_MAIL</a> *mail, const <a class="el" href="group__smtp__structs.html#struct_n_e_t___s_m_t_p___m_t_a">NET_SMTP_MTA</a> *mta)</td></tr>
<tr class="memdesc:gabb5265fa948e0bfded49cc7bf695ab5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send an email in blocking mode. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>].  <a href="#gabb5265fa948e0bfded49cc7bf695ab5d">More...</a><br/></td></tr>
<tr class="separator:gabb5265fa948e0bfded49cc7bf695ab5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Functions to connect to an SMTP server. </p>
<p>The SMTP Client supports two modes of operation. Mode of operation is selected with the function, which is used to send an email. The following are available:</p>
<ul>
<li><a class="el" href="group__smtpc__user__api.html#gabb5265fa948e0bfded49cc7bf695ab5d">netSMTPc_SendMail</a> function starts <b>blocking mode</b>,</li>
<li><a class="el" href="group__smtpc__user__api.html#ga33454db9427528430742f6863c22f871">netSMTPc_Connect</a> function starts <b>legacy mode</b>.</li>
</ul>
<p>The <b>blocking mode</b> starts with a call to <a class="el" href="group__smtpc__user__api.html#gabb5265fa948e0bfded49cc7bf695ab5d">netSMTPc_SendMail</a> function. In this mode user callbacks are not used. The calling function is blocked until the operation completes and then returns the state of the operation. The blocking mode supports additional features, which are not available in legacy mode:</p>
<ul>
<li>multiple email recipients,</li>
<li>additional address friendly names,</li>
<li>encoding support for non ascii characters (ie. utf-8),</li>
<li>email attachments.</li>
</ul>
<p>When the <a class="el" href="group__smtpc__user__api.html#gabb5265fa948e0bfded49cc7bf695ab5d">netSMTPc_SendMail</a> function is called, the SMTP client resolves the IP address from the specified server name and opens a SMTP connection to the server. After handshaking, the SMTP Client transmits the message content. If the email attachments are specified, the client composes a multipart MIME message with the attachments. If you want to send an email with the attachment, you have to enable SMTP Client (full variant) in µVision configuration and specify file name(s) to attach.</p>
<p>The <b>legacy mode</b> starts with a connect request using <a class="el" href="group__smtpc__user__api.html#ga33454db9427528430742f6863c22f871">netSMTPc_Connect</a>. The SMTP client then opens a SMTP connection to the specified server. The user application then needs to wait for the callback function <a class="el" href="group__smtpc__operation.html#ga5240c89a181c1ddb07bbe888a6a8657f">netSMTPc_Notify</a> to return the state of the operation. Based on the callback event, further processing can be started. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga33454db9427528430742f6863c22f871"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netSMTPc_Connect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start SMTP client to send an email in legacy mode. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">addr</td><td>structure containing IP address and port of SMTP server. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netSMTPc_Connect</b> starts the SMTP client. The SMTP client then connects to an SMTP server specified with the argument <em>addr</em> which points to a buffer containing the IP address and port of the SMTP server. If the specified port is <span class="XML-Token">0</span>, the client uses a standard SMTP server port <span class="XML-Token">25</span> to connect to the server.</p>
<p>Possible <a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p>
<ul>
<li><em>netOK:</em> Mail client started successfully.</li>
<li><em>netInvalidParameter:</em> Invalid SMTP server address provided.</li>
<li><em>netWrongState:</em> Mail client is busy.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The function <b>netSMTPc_Connect</b> is deprecated, use the <a class="el" href="group__smtpc__user__api.html#gabb5265fa948e0bfded49cc7bf695ab5d">netSMTPc_SendMail</a> function instead.</dd></dl>
<p><b>Code</b> <b>Example</b> </p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="group__network__structs.html#struct_n_e_t___a_d_d_r4">NET_ADDR4</a> smtp_server = { <a class="code" href="rl__net__ds_8h.html#ab5ae61a54f36e338a8dc06cee088d89f">NET_ADDR_IP4</a>, 0, 192, 168, 0, 253 };</div>
<div class="line"> ..</div>
<div class="line"><span class="comment">// Start SMTP client, use default SMTP port</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__smtpc__user__api.html#ga33454db9427528430742f6863c22f871">netSMTPc_Connect</a> ((<a class="code" href="group__network__structs.html#struct_n_e_t___a_d_d_r">NET_ADDR</a> *)&amp;smtp_server) != <a class="code" href="rl__net__ds_8h.html#ga5675a3b88ee02986ae15ae3bb8135551a138e73e2c0ad9ef9426ac81ef809953b">netOK</a>) {</div>
<div class="line">  <span class="comment">// Failed to start SMTP process</span></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gabb5265fa948e0bfded49cc7bf695ab5d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> netSMTPc_SendMail </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="group__smtp__structs.html#struct_n_e_t___s_m_t_p___m_a_i_l">NET_SMTP_MAIL</a> *&#160;</td>
          <td class="paramname"><em>mail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__smtp__structs.html#struct_n_e_t___s_m_t_p___m_t_a">NET_SMTP_MTA</a> *&#160;</td>
          <td class="paramname"><em>mta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send an email in blocking mode. [<a class="el" href="group__function__categories.html#thread-safe">thread-safe</a>]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mail</td><td>pointer to email content descriptor. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mta</td><td>pointer to mail transfer agent descriptor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function.</dd></dl>
<p>The function <b>netSMTPc_SendMail</b> sends an email in blocking mode. The function blocks the calling thread and returns, when an email is sent. The function resolves server IP address from the host name, connects to the server and sends an email.</p>
<p>The argument <em>mail</em> points to a structure that contains a description of an email to send. All entries in a structure are pointers to <span class="XML-Token">null</span>-terminated strings. When more parameters are specified (for example several <em>To</em> addresses), use a semicolon ';' character as a parameter separator.</p>
<p>The argument <em>mta</em> points to a structure with mail transfer agent parameters. This structure contains SMTP server address, port number, flags and user credentials for authentication. Server address can be either a fully qualified domain name or an IP address presented in string format.</p>
<p>Possible <a class="el" href="group__net_status_error_codes.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> return values:</p>
<ul>
<li><em>netOK:</em> Operation completed successfully.</li>
<li><em>netInvalidParameter:</em> Invalid or not supported parameter provided.</li>
<li><em>netWrongState:</em> Mail client is busy.</li>
<li><em>netDnsResolverError:</em> DNS host resolver failed.</li>
<li><em>netServerError:</em> Mail server failed.</li>
<li><em>netAuthenticationFailed:</em> User credentials are not valid.</li>
<li><em>netFileError:</em> Requested mail attachment is not existing.</li>
<li><em>netError:</em> Mail client internal error.</li>
</ul>
<p><b>Code</b> <b>Example</b> (multiple recipients and friendly names) </p>
<div class="fragment"><div class="line"><a class="code" href="group__smtp__structs.html#struct_n_e_t___s_m_t_p___m_a_i_l">NET_SMTP_MAIL</a> mail;</div>
<div class="line"><a class="code" href="group__smtp__structs.html#struct_n_e_t___s_m_t_p___m_t_a">NET_SMTP_MTA</a>  server;</div>
<div class="line"><span class="keywordtype">char</span> buffer[200];</div>
<div class="line"> ..</div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#a641c7ba6868ed3982d12ff310a7e80a5">From</a>       = <span class="stringliteral">&quot;John &lt;john@example.net&gt;&quot;</span>;</div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#a2e98954a68ccdf7c35f82e1991c5b429">To</a>         = <span class="stringliteral">&quot;Mary &lt;mary@example.net&gt;; Joe &lt;joe@example.net&gt;&quot;</span>; </div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#adf5a95f1fe450811b5c0118af4feeb2c">Cc</a>         = <span class="stringliteral">&quot;Tony &lt;tony@example.net&gt;&quot;</span>;</div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#a1b190618968733bdcc78f7853eee3e21">Bcc</a>        = <span class="stringliteral">&quot;Support&lt;support@example.net&gt;&quot;</span>;</div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#a891a066e2597a86115c48cf1cb901de2">Subject</a>    = <span class="stringliteral">&quot;Mail demo&quot;</span>;</div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#abb394486e1299f83ae0915fc16ff50e1">Message</a>    = buffer;</div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#af8c718a45ba0457de920a28362a19e43">Attachment</a> = NULL;</div>
<div class="line">mail.<a class="code" href="group__smtp__structs.html#a7d072dbf1f6abc03a6efe5b95d8c16fe">Encoding</a>   = NULL;</div>
<div class="line"> </div>
<div class="line">sprintf (buffer, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;Hello from SMTP client!&quot;</span>);</div>
<div class="line"> </div>
<div class="line">server.<a class="code" href="group__smtp__structs.html#a86316a537787f128f25b4f47d71431f7">Address</a>  = <span class="stringliteral">&quot;mail.example.net&quot;</span>;</div>
<div class="line">server.<a class="code" href="group__smtp__structs.html#aeac1f39ed83d419caa452b3d33dd5d12">Port</a>     = 0;</div>
<div class="line">server.<a class="code" href="group__smtp__structs.html#af2800c799892d286bd4a937d93fff2d2">Flags</a>    = 0;</div>
<div class="line">server.<a class="code" href="group__smtp__structs.html#ab0dc4f4789b858bc91a23e409d2512a9">Username</a> = <span class="stringliteral">&quot;my_username&quot;</span>;</div>
<div class="line">server.<a class="code" href="group__smtp__structs.html#ab32dd31026bebd559d127ef9bea777e0">Password</a> = <span class="stringliteral">&quot;my_password&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Send mail, use default SMTP port</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="group__smtpc__user__api.html#gabb5265fa948e0bfded49cc7bf695ab5d">netSMTPc_SendMail</a> (&amp;mail, &amp;server) != <a class="code" href="rl__net__ds_8h.html#ga5675a3b88ee02986ae15ae3bb8135551a138e73e2c0ad9ef9426ac81ef809953b">netOK</a>) {</div>
<div class="line">  <span class="comment">// Failed to send an email</span></div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Code</b> <b>Example</b> (<em>utf-8</em> encoding for 'µ' character) </p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <a class="code" href="group__smtp__structs.html#struct_n_e_t___s_m_t_p___m_a_i_l">NET_SMTP_MAIL</a> mail = {</div>
<div class="line">  <span class="stringliteral">&quot;john@example.net&quot;</span>,            <span class="comment">// From</span></div>
<div class="line">  <span class="stringliteral">&quot;mary@example.net&quot;</span>,            <span class="comment">// To </span></div>
<div class="line">  NULL,                          <span class="comment">// Cc</span></div>
<div class="line">  NULL,                          <span class="comment">// Bcc</span></div>
<div class="line">  <span class="stringliteral">&quot;µVision test&quot;</span>,                <span class="comment">// Subject</span></div>
<div class="line">  <span class="stringliteral">&quot;Here is µVision test log!&quot;</span>,   <span class="comment">// Message</span></div>
<div class="line">  NULL,                          <span class="comment">// Attachment</span></div>
<div class="line">  <span class="stringliteral">&quot;utf-8&quot;</span>                        <span class="comment">// Encoding</span></div>
<div class="line">};</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue May 25 2021 13:57:38 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
