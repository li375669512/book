<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Stack, Heap and RTOS Configuration</title>
<title>MDK Middleware: Stack, Heap and RTOS Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MDK Middleware
   &#160;<span id="projectnumber">Version 7.13.0</span>
   </div>
   <div id="projectbrief">Software Components for MDK-Professional and MDK-Plus</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('mw_using_stack_and_heap.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Stack, Heap and RTOS Configuration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Every software component has resource requirements for stack, heap, and memory. Configuration files such as <a class="el" href="mw_using_stack_and_heap.html#mw_using_startup">startup_device.s</a> and <a class="el" href="mw_using_stack_and_heap.html#mw_using_rtx_conf">RTX_Config.h</a> need to be adapted to these requirements. Every middleware component has a section that explains the resource requirements and gives examples on how to calculate the resulting values for adaption of the configuration files.</p>
<h1><a class="anchor" id="mw_using_startup"></a>
Configuring Stack using startup_device.s</h1>
<p>The <b>startup_device.s</b> file is provided by the device vendor in a <a href="http://www.keil.com/cmsis/pack" class="el" target="_blank">Device Family Pack</a>. The file will be copied into a ÂµVision project automatically after selecting <b>Device:Startup</b> in the <b>Manage Run-Time Environment</b> window. It is used to configure the size of the stack that is used by exceptions and <b>interrupt service routines (ISR)</b> for the current project. The stack size requirements depend on the maximum nesting of exception and ISR execution and therefore on the priority settings of the various interrupt and exception sources. Also, the heap which is used by memory allocation functions is configured in this file.</p>
<p>Most of the middleware components only require additional <b>stack</b> size, whereas the <b>File System</b> component also requires additional <b>heap</b> size. The memory requirements are stated in the <a class="el" href="mw_using_mw.html">Resource Requirements</a> section of each middleware component.</p>
<h1><a class="anchor" id="mw_using_rtx_conf"></a>
Configuring CMSIS-RTOS2 using RTX_Config.h</h1>
<p>The stack size in the <b>startup_device.s</b> file configures only the stack space that is used by exceptions and <b>interrupt service routines (ISR)</b>. When using a CMSIS-RTOS2, additional requirements for the RTOS are configured in the  <script>link_ext('RTX-Conf-CM5');</script> file. In general middleware components use statically allocated resources when RTX v5 is used and in that case no change to RTX configuration file is necessary, for details consult Resource Requirements section of related component.</p>
<p>The additional CMSIS-RTOS related requirements are also stated in the <a class="el" href="mw_using_mw.html">Resource Requirements</a> section of each middleware component. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="mw_using_mw.html">Middleware Documentation</a></li>
    <li class="footer">Generated on Tue May 25 2021 13:57:21 for MDK Middleware by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
