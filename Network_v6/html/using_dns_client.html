<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DNS Client</title>
<title>Network Component: DNS Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 6.7.7</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('using_dns_client.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DNS Client </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>Domain Name System (DNS)</b> servers store and manage information about <b>domains</b> and respond to <b>resolution requests</b> for clients (in some cases millions of times each day). The DNS database is a <b>distributed</b> name database stored on many DNS servers. DNS uses a hierarchical tree structure for its name space and a hierarchical tree for name authorities and registration.</p>
<p>Since information in DNS is stored in a distributed form, there is no single server that has information about every domain in the system. The process of resolution instead relies on the hierarchy of name servers as described above.</p>
<p>At the top of the DNS hierarchy is the <b>root domain</b> and the <b>root name servers</b>. These are the most important servers because they maintain information about the top-level domains within the root. They also know the servers that can be used to resolve domains one level below them. Those servers can reference servers that are responsible for second-level domains. Thus, a DNS resolution requests might be sent to more than one server.</p>
<p>The DNS Client is capable of resolving the <b>IP address</b> of a host from the <b>host's name</b>. It does this by sending DNS requests to a DNS Server. The IP address of a DNS Server is specified in the network interface configuration file or can be obtained from the DHCP Server for the Local Area Network.</p>
<p>The DNS Client <b>caches</b> the resolved IP addresses. The length of time the resolved host IP address is kept in the local cache depends on the Time to Live (TTL) timeout. This is returned in an answering packet from the DNS Server. The next time a DNS is requested, the cache table is checked first. If a valid host is found, the IP address is resolved from the cache and no actual DNS request is sent to the DNS Server.</p>
<p>You must use the DNS Client when a remote host uses a <b>Dynamic IP</b>, which changes each time the remote host logs on to the Internet.</p>
<h1><a class="anchor" id="starting_dns"></a>
Starting DNS</h1>
<p>Start the DNS Client by calling the function <a class="el" href="group__service__dns__client.html#ga1a1e2637ff136e86c7a94e5322e165a7">get_host_by_name</a>. DNS requests are routed to the DNS Server IP address of an active network interface. If you are using a <a class="el" href="using_ppp_interfaces.html">PPP</a> or <a class="el" href="using_slip_interfaces.html">SLIP</a> interface and no <a class="el" href="using_ethernet_interfaces.html">Ethernet</a> interface, you must enable the "Use default Gateway on remote Network" option in the configuration file (<b>Net_Config_PPP_0.h</b> or <b>Net_Config_SLIP_0.h</b>).</p>
<p>You must also specify a callback function, which is called from the DNS Client when a DNS event occurs. </p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> dns_cbfunc (<a class="code" href="group__service__dns__client.html#ga931c51226b918133c33861e9736ae651">dnsClientEvent</a> event, <span class="keyword">const</span> uint8_t *ip_addr) {</div>
<div class="line">  <span class="keywordflow">switch</span> (event) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga931c51226b918133c33861e9736ae651ae9eba066b7c82da1a72218160d045a68">dnsClientSuccess</a>:</div>
<div class="line">      <span class="comment">// Host Address successfully resolved.</span></div>
<div class="line">      printf(<span class="stringliteral">&quot;IP Address : %d.%d.%d.%d\n&quot;</span>, ip_addr[0], ip_addr[1],</div>
<div class="line">                                           ip_addr[2], ip_addr[3]);</div>
<div class="line">      next_host();</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga931c51226b918133c33861e9736ae651acd8c2578635bc10f835374ddffc33a06">dnsClientNotResolved</a>:</div>
<div class="line">      <span class="comment">// Host Name does not exist in DNS record database.</span></div>
<div class="line">      printf(<span class="stringliteral">&quot;Host name does not exist.\n&quot;</span>);</div>
<div class="line">      next_host();</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga931c51226b918133c33861e9736ae651a1a132eb6d067d66602196b10e0b3d157">dnsClientTimeout</a>:</div>
<div class="line">      <span class="comment">// All DNS Resolver retries used up and timeouts expired.</span></div>
<div class="line">      printf(<span class="stringliteral">&quot;DNS Resolver Timeout expired, Host Address not resolved.\n&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga931c51226b918133c33861e9736ae651aa145cae93c70e9f2c4077a813c8699bb">dnsClientError</a>:</div>
<div class="line">      <span class="comment">// DNS Protocol Error, invalid or corrupted reply received.</span></div>
<div class="line">      printf(<span class="stringliteral">&quot;DNS Resolver Protocol Error, Host Address not resolved.\n&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>When the required host is found in the local DNS Cache, the callback function is called immediately with the result code <code></code> <span class="XML-Token">dnsClientSuccess</span> and provides the IP address of the host to the function. In this case, no actual DNS request packet is sent to the remote DNS Server.</p>
<dl class="section note"><dt>Note</dt><dd>You can also provide the IP address in a string format to specify the host name. The DNS Client decodes it and returns the decoded IP address to the callback function.</dd></dl>
<h1><a class="anchor" id="using_dns_client_conf"></a>
DNS Client Configuration</h1>
<p>The DNS client configuration file <b>Net_Config_DNS_Client.h</b> contains only the setting <b>Cache Table Size</b> which specifies the size of the DNS Cache by defining the number of entries for the DNS Cache table. When the IP address is resolved, it is also stored to the local cache. When a request for resolving an IP address is received, the DNS Client first checks the local cache memory. If a valid entry is found there, the IP address is taken from the cache, and the request is not sent on to the remote DNS Server.</p>
<dl class="section note"><dt>Note</dt><dd>DNS Cache entries expire after a <b>Time to Live (TTL)</b> timeout. This is defined by the DNS Server. The TTL value for resolved IP addresses is received in an answer packet from the DNS Server. The DNS Client manages the timeouts. When a timeout counter <b>expires</b>, the DNS Cache entry is <b>deleted</b> from the Cache. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="using_network_components.html">Using Network Components</a></li><li class="navelem"><a class="el" href="using_network_services.html">Services</a></li>
    <li class="footer">Generated on Tue May 25 2021 13:57:55 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
