<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>FTP Client</title>
<title>Network Component: FTP Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 6.7.7</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('using_ftp_client.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FTP Client </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The FTP client allows you to connect to a remote FTP server and perform various file operations. Using the FTP client you can:</p>
<ul>
<li>transfer files from local system to remote FTP server,</li>
<li>transfer files from remote FTP server to a local system,</li>
<li>append a local file to remote file on FTP server,</li>
<li>delete a file from the FTP server,</li>
<li>list the files stored on FTP server,</li>
<li>rename a file or directory on FTP server,</li>
<li>create a directory on FTP server,</li>
<li>remove a directory from FTP server.</li>
</ul>
<p>The FTP client session starts with a <a class="el" href="group__net__ftpc_func.html#gaa834ed8ba4c4f8eb18a646b3b81f68b5">connect</a> request. The FTP client then opens a FTP connection to the server. The file operation to perform is specified in the connect request parameter. Once the file operation has completed, the FTP session ends and the connection closes. FTP session performs only one file operation. If you want to transfer more files, you need to start FTP session again.</p>
<h1><a class="anchor" id="ftpc_fs_interface"></a>
File System Interface</h1>
<p>All File System interface functions are located in <b>FTP_Client_FS.c</b>, which will be automatically added to your project's <b>Network</b> folder. The file is preconfigured for the File System Component, so no modifications are required. If you want to use another type of file system or to use a different storage media such as a hard disk, you need to add a similar file to your project.</p>
<p>The following functions are implemented in this module:</p>
<ul>
<li><a class="el" href="group__net__ftpc_func.html#gaaa94db2fb35f54721132031827de3f09">ftp_client_fopen</a> - open a file for reading or writing.</li>
<li><a class="el" href="group__net__ftpc_func.html#ga6bc673ffd94723bc39c46eaa02082d2b">ftp_client_fclose</a> - close a file that was previously opened.</li>
<li><a class="el" href="group__net__ftpc_func.html#ga95b4813964a728b05e09375892f265eb">ftp_client_fread</a> - read a block of data from a file to the FTP data buffer.</li>
<li><a class="el" href="group__net__ftpc_func.html#gaf9a2d5a4cbaaea3f87ac18a6072b68ac">ftp_client_fwrite</a> - write a block of data from the FTP data buffer to a file.</li>
</ul>
<h1><a class="anchor" id="ftpc_session"></a>
FTP Client Session Operation</h1>
<p>All required session parameters are given in the <a class="el" href="group__net__ftpc_func.html#ga6d15b119772715640e239d7d8ddbc807">ftp_client_request</a> callback function. This function is in the <b>FTP_Client_UIF.c</b> module. From the callback function, you can specify the username/password to access the FTP server, a working directory on the FTP server, a filename for the file operation, etc.</p>
<p>The FTP Client's operation mode is working with a relative path. This means the filename can not contain a path information. Instead of this, a working directory must be specified in the <b>FTP_Client_UIF.c</b> user interface module. After login, the FTP Client first changes the working directory to the path specified in user interface module, and then performs a file command. To add the module to your project, simply right-click on the Source group, select <b>Add Net Item to Group</b>, then click on <b>User Code Template</b> and scroll in the template files list until you find the <b>FTP Client User Interface</b> template. The FTP Client also supports directory manipulation and rename commands. This allows you to create or remove directories, and to rename files or directories on the server.</p>
<p>The following function is included in the Network Component library rl_net.h:</p>
<ul>
<li><a class="el" href="group__net__ftpc_func.html#ga6d15b119772715640e239d7d8ddbc807">ftp_client_request</a> - request parameters for FTP client session.</li>
</ul>
<h1><a class="anchor" id="ftpc_user_app_notification"></a>
User Application Notification</h1>
<p>The end of a FTP Client operation can be notified to the user utilizing the <a class="el" href="group__net__ftpc_func.html#ga32eb0d197bb79ae76ef5e72ed67e38c8">ftp_client_notify</a> function. It is part of the file <b>FTP_Client_UIF.c</b> module as well. You need to adapt the function to the application's needs.</p>
<p><b>Code Example FTP_Client_UIF.c</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Request parameters for FTP client session.</span></div>
<div class="line">uint32_t <a class="code" href="group__net__ftpc_func.html#ga6d15b119772715640e239d7d8ddbc807">ftp_client_request</a> (<a class="code" href="group__net__ftpc_func.html#gaf11b4bda6ad068fb78733057f1273d62">ftpClientRequest</a> request, <span class="keywordtype">char</span> *buf, uint32_t len) {</div>
<div class="line">  uint32_t rlen = 0;</div>
<div class="line"><span class="comment">//int32_t i;</span></div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">switch</span> (request) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62afe6a7322ec631742513bb6df02ff4ecf">ftpClientUsername</a>:</div>
<div class="line">      <span class="comment">// Username to login to FTP server</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;anonymous&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62adde9d98e1a227f9b58e84084e4633af1">ftpClientPassword</a>:</div>
<div class="line">      <span class="comment">// Password to login to FTP server</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;test@keil.com&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62aa5c4e9f7d8a38ca64a08738bbb4988c1">ftpClientPath</a>:</div>
<div class="line">      <span class="comment">// Working directory path on server</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;/Logs&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62a492dbf2f61b9330c64ef0ae8dec47aea">ftpClientFilename</a>:</div>
<div class="line">      <span class="comment">// Filename for PUT, GET, APPEND, DELETE or RENAME command</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;test.log&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62a3c8bbb3a7392aec22f93e9a51388303d">ftpClientNewName</a>:</div>
<div class="line">      <span class="comment">// New name for a RENAME command</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;renamed.log&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62a6f452e18e6a351a4f2e7ef3b37a23a99">ftpClientDirectory</a>:</div>
<div class="line">      <span class="comment">// Directory name for MKDIR or RMDIR command</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;New_Folder&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62ab338a07775ef00d67f743921e4d3b987">ftpClientFilterMask</a>:</div>
<div class="line">      <span class="comment">// File filter/mask for LIST command (wildcards allowed)</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62a0cc9a187628aeea473ec8d23208054ff">ftpClientList</a>:</div>
<div class="line">      <span class="comment">// Received data if LIST command is given</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      for (i = 0; i &lt; len; i++) {</span></div>
<div class="line"><span class="comment">        putchar (buf[i]);</span></div>
<div class="line"><span class="comment">      }</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#gaf11b4bda6ad068fb78733057f1273d62afa13ea91c987fa5e17b2126547764f2f">ftpClientLocalFile</a>:</div>
<div class="line">      <span class="comment">// Local filename</span></div>
<div class="line">      <span class="comment">/* Example</span></div>
<div class="line"><span class="comment">      rlen = sprintf (buf, &quot;test_log.txt&quot;);</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (rlen);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// Notify the user application when FTP client operation ends.</span></div>
<div class="line"><span class="keywordtype">void</span> <a class="code" href="group__net__ftpc_func.html#ga32eb0d197bb79ae76ef5e72ed67e38c8">ftp_client_notify</a> (<a class="code" href="group__net__ftpc_func.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9">ftpClientEvent</a> event) {</div>
<div class="line">  <span class="keywordflow">switch</span> (event) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9a0b98ecc8a01f30a13ddaea899d79c548">ftpClientSuccess</a>:</div>
<div class="line">      <span class="comment">// File operation successful</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9a0c1ffff178a2892dc92358d0e3f37eab">ftpClientTimeout</a>:</div>
<div class="line">      <span class="comment">// Timeout on file operation</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9ae58516bdc5c741cc1818804af990d0e3">ftpClientLoginFailed</a>:</div>
<div class="line">      <span class="comment">// Login error, username/password invalid</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9a8c0a8eadff5c69acfdc3a4f6e0b6fc79">ftpClientAccessDenied</a>:</div>
<div class="line">      <span class="comment">// File access not allowed</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9a632b142eeb46c0d5e990c256ee88ac60">ftpClientFileNotFound</a>:</div>
<div class="line">      <span class="comment">// File not found</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9aceaeb7d23fe093e4395de9c8297778e7">ftpClientInvalidPath</a>:</div>
<div class="line">      <span class="comment">// Working directory path not found</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9a62983b8eef469b16226ffcbb3830a99c">ftpClientLocalFileError</a>:</div>
<div class="line">      <span class="comment">// Local file open/write error</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="rl__net_8h.html#ga2cf8dfa1b55463fbc7c7bc7de8edbdd9a1371ffd386f6d110ef382c3f49ef13e5">ftpClientError</a>:</div>
<div class="line">      <span class="comment">// Generic FTP client error</span></div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> <h1><a class="anchor" id="using_ftp_client_conf"></a>
FTP Client Configuration</h1>
<div class="image">
<img src="net_config_ftp_client_h.png" alt="net_config_ftp_client_h.png"/>
<div class="caption">
FTP Client Configuration File</div></div>
<p> The FTP client configuration file <b>Net_Config_FTP_Client.h</b> contains the following settings:</p>
<ul>
<li><b>Response Timeout in seconds</b> is an inactivity timeout. When the FTP client does not receive a response from a FTP server within this timeout, the operation is aborted.</li>
<li>In <b>Passive mode (PASV)</b>, the FTP client initiates both connections (control and data) to the server. This solves the problem of firewalls filtering the incoming data port connection to the client from the server.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>One FTP session uses two TCP sockets, one control and one data socket. Have this in mind when you are configuring the number of TCP sockets. </dd></dl>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="using_network_components.html">Using Network Components</a></li><li class="navelem"><a class="el" href="using_network_services.html">Services</a></li>
    <li class="footer">Generated on Tue May 25 2021 13:57:55 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
