<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>SNTP Client</title>
<title>Network Component: SNTP Client</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 6.7.7</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sntp__routines.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SNTP Client<div class="ingroups"><a class="el" href="group__net__services.html">Services</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>SNTP Client routines deliver precise timing information over an IP network.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gacaa5ec5395f9160151f00958fbd112fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sntp__routines.html#gacaa5ec5395f9160151f00958fbd112fb">sntp_get_time</a> (const uint8_t *ip_addr, <a class="el" href="group__sntp__routines.html#ga5079d2b41d9badabff755d40e756aab0">net_sntp_client_cb_t</a> cb_func)</td></tr>
<tr class="memdesc:gacaa5ec5395f9160151f00958fbd112fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine current time from NTP or SNTP time server.  <a href="#gacaa5ec5395f9160151f00958fbd112fb">More...</a><br/></td></tr>
<tr class="separator:gacaa5ec5395f9160151f00958fbd112fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5079d2b41d9badabff755d40e756aab0"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sntp__routines.html#ga5079d2b41d9badabff755d40e756aab0">net_sntp_client_cb_t</a> )(uint32_t utc_time)</td></tr>
<tr class="memdesc:ga5079d2b41d9badabff755d40e756aab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">SNTP Client callback function.  <a href="#ga5079d2b41d9badabff755d40e756aab0">More...</a><br/></td></tr>
<tr class="separator:ga5079d2b41d9badabff755d40e756aab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>SNTP Client routines deliver precise timing information over an IP network. </p>
<p><b>Simple Network Time Protocol (SNTP)</b> is a networking protocol for <b>clock</b> <b>synchronization</b> between computer systems over IP based, variable-latency data networks. SNTP does not require the storage of the state over extended periods of time, so that it is used mostly in memory limited embedded devices and in applications where high accuracy timing is not required. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga5079d2b41d9badabff755d40e756aab0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* net_sntp_client_cb_t)(uint32_t utc_time)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SNTP Client callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">utc_time</td><td>UTC time in seconds</td></tr>
  </table>
  </dd>
</dl>
<p>Is the type definition for the SNTP callback function. Users must provide the function.</p>
<p>The function is called by the SNTP client when an NTP message is received from the server. The <em>utc_time</em> argument of the callback function signals the time, specified in UTC (Universal Time Coordinated) in seconds, elapsed since 1.1.1970. A value of <span class="XML-Token">0</span> reports an error.</p>
<p><b>Parameter for:</b></p>
<ul>
<li><a class="el" href="group__sntp__routines.html#gacaa5ec5395f9160151f00958fbd112fb">sntp_get_time</a> </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gacaa5ec5395f9160151f00958fbd112fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> sntp_get_time </td>
          <td>(</td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ip_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__sntp__routines.html#ga5079d2b41d9badabff755d40e756aab0">net_sntp_client_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine current time from NTP or SNTP time server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ip_addr</td><td>IP address of NTP or SNTP server. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_func</td><td>callback function to call, when the session ends. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="rl__net_8h.html#a5675a3b88ee02986ae15ae3bb8135551">netStatus</a>.</dd></dl>
<p>In unicast mode, the function <b>sntp_get_time</b> sends a get time request to NTP server.</p>
<p>In broadcast mode, it opens an UDP socket for receiving broadcast NTP messages. You can use broadcast mode, if you have a broadcasting NTP server in your local network.</p>
<p>The argument <em>ip_addr</em> specifies the IP address of a local NTP server. NTP messages that come from the specified NTP server are accepted. Messages that come from a different NTP server are ignored. If <em>ip_addr</em> is <span class="XML-Token">0.0.0.0</span>, then NTP messages from any NTP server are accepted.</p>
<p>If the IP address is not specified (<em>ip_addr</em> is <span class="XML-Token">NULL</span>), then the IP address of the NTP Server configured in <b>Net_Config_SNTP_Client.h</b> is used. <b>Broadcast Mode</b> gets also enabled here.</p>
<p>The argument <em>cb_func</em> points to a user-defined callback function called by the SNTP client when an NTP message is received from the server. Refer to <a class="el" href="group__sntp__routines.html#ga5079d2b41d9badabff755d40e756aab0">net_sntp_client_cb_t</a>.</p>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> time_cback (uint32_t time);</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> get_time (<span class="keywordtype">void</span>) {</div>
<div class="line">  <span class="keyword">const</span> uint8_t ntp_server[4] = {217,79,179,106};</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="group__sntp__routines.html#gacaa5ec5395f9160151f00958fbd112fb">sntp_get_time</a> (&amp;ntp_server[0], time_cback) == <a class="code" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551a138e73e2c0ad9ef9426ac81ef809953b">netOK</a>) {</div>
<div class="line">    printf (<span class="stringliteral">&quot;SNTP request sent.\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    printf (<span class="stringliteral">&quot;Failed, SNTP not ready or bad parameters.\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> time_cback (uint32_t time) {</div>
<div class="line">  <span class="keywordflow">if</span> (time == 0) {</div>
<div class="line">    printf (<span class="stringliteral">&quot;Error, server not responding or bad response.\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    printf (<span class="stringliteral">&quot;%d seconds elapsed since 1.1.1970\n&quot;</span>, time);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue May 25 2021 13:57:56 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
