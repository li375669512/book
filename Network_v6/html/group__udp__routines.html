<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>UDP Socket</title>
<title>Network Component: UDP Socket</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Network Component
   &#160;<span id="projectnumber">Version 6.7.7</span>
   </div>
   <div id="projectbrief">MDK-Professional Middleware for IP Networking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__udp__routines.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">UDP Socket<div class="ingroups"><a class="el" href="group__net__sockets.html">Sockets</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>UDP socket routines enable simple IP communication using the user datagram protocol (UDP).  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga614107cc1ce34562e8b0a525917eb5ec"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a> (uint8_t tos, uint8_t opt, <a class="el" href="group__udp__routines.html#gab5b2151953e20bbc2b5ebd0c8c78f0d5">net_udp_cb_t</a> cb_func)</td></tr>
<tr class="memdesc:ga614107cc1ce34562e8b0a525917eb5ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a free UDP socket.  <a href="#ga614107cc1ce34562e8b0a525917eb5ec">More...</a><br/></td></tr>
<tr class="separator:ga614107cc1ce34562e8b0a525917eb5ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad420f69694d983a91066e8178a5df312"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#gad420f69694d983a91066e8178a5df312">udp_release_socket</a> (int32_t <a class="el" href="group__bsd__routines.html#gabd21dff339393ec8e83b439d1120df71">socket</a>)</td></tr>
<tr class="memdesc:gad420f69694d983a91066e8178a5df312"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release UDP socket and free resources.  <a href="#gad420f69694d983a91066e8178a5df312">More...</a><br/></td></tr>
<tr class="separator:gad420f69694d983a91066e8178a5df312"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa448546b5d13fcd58aad9d488d72f1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#gaaa448546b5d13fcd58aad9d488d72f1f">udp_open</a> (int32_t <a class="el" href="group__bsd__routines.html#gabd21dff339393ec8e83b439d1120df71">socket</a>, uint16_t port)</td></tr>
<tr class="memdesc:gaaa448546b5d13fcd58aad9d488d72f1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open UDP socket for communication.  <a href="#gaaa448546b5d13fcd58aad9d488d72f1f">More...</a><br/></td></tr>
<tr class="separator:gaaa448546b5d13fcd58aad9d488d72f1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6f41cb30b833ea6b875dc770c40e6a5e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#ga6f41cb30b833ea6b875dc770c40e6a5e">udp_close</a> (int32_t <a class="el" href="group__bsd__routines.html#gabd21dff339393ec8e83b439d1120df71">socket</a>)</td></tr>
<tr class="memdesc:ga6f41cb30b833ea6b875dc770c40e6a5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop UDP communication and close socket.  <a href="#ga6f41cb30b833ea6b875dc770c40e6a5e">More...</a><br/></td></tr>
<tr class="separator:ga6f41cb30b833ea6b875dc770c40e6a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe0998ea95189b5cedce153a5609aa28"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#gabe0998ea95189b5cedce153a5609aa28">udp_multicast_ttl</a> (int32_t <a class="el" href="group__bsd__routines.html#gabd21dff339393ec8e83b439d1120df71">socket</a>, uint8_t ttl)</td></tr>
<tr class="memdesc:gabe0998ea95189b5cedce153a5609aa28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set Time To Live value for multicast packets.  <a href="#gabe0998ea95189b5cedce153a5609aa28">More...</a><br/></td></tr>
<tr class="separator:gabe0998ea95189b5cedce153a5609aa28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga836d0644c9cbe14abee14a1127e112f0"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#ga836d0644c9cbe14abee14a1127e112f0">udp_get_buf</a> (uint32_t size)</td></tr>
<tr class="memdesc:ga836d0644c9cbe14abee14a1127e112f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate memory for UDP send buffer.  <a href="#ga836d0644c9cbe14abee14a1127e112f0">More...</a><br/></td></tr>
<tr class="separator:ga836d0644c9cbe14abee14a1127e112f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9acc06602434d00a35d2e64a0549f137"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#ga9acc06602434d00a35d2e64a0549f137">udp_send</a> (int32_t <a class="el" href="group__bsd__routines.html#gabd21dff339393ec8e83b439d1120df71">socket</a>, const uint8_t *ip_addr, uint16_t port, uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:ga9acc06602434d00a35d2e64a0549f137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data to a remote node.  <a href="#ga9acc06602434d00a35d2e64a0549f137">More...</a><br/></td></tr>
<tr class="separator:ga9acc06602434d00a35d2e64a0549f137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab5b2151953e20bbc2b5ebd0c8c78f0d5"><td class="memItemLeft" align="right" valign="top">typedef uint32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__udp__routines.html#gab5b2151953e20bbc2b5ebd0c8c78f0d5">net_udp_cb_t</a> )(int32_t <a class="el" href="group__bsd__routines.html#gabd21dff339393ec8e83b439d1120df71">socket</a>, const uint8_t *ip_addr, uint16_t port, const uint8_t *buf, uint32_t len)</td></tr>
<tr class="memdesc:gab5b2151953e20bbc2b5ebd0c8c78f0d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">UDP Event callback function.  <a href="#gab5b2151953e20bbc2b5ebd0c8c78f0d5">More...</a><br/></td></tr>
<tr class="separator:gab5b2151953e20bbc2b5ebd0c8c78f0d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>UDP socket routines enable simple IP communication using the user datagram protocol (UDP). </p>
<p>The User Datagram Protocol (UDP) runs on top of the Internet Protocol (IP) and was developed for application that do not require reliability, acknowledgement, or flow control features at the transport layer. This simple protocol provides transport layer addressing in the form of UDP ports and an optional checksum capability.</p>
<dl class="section note"><dt>Note</dt><dd>More information on the usage of UDP and how to work with the functions is available at <a class="el" href="using_network_sockets_udp.html">UDP Socket</a>. </dd></dl>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="gab5b2151953e20bbc2b5ebd0c8c78f0d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t(* net_udp_cb_t)(int32_t <a class="el" href="group__bsd__routines.html#gabd21dff339393ec8e83b439d1120df71">socket</a>, const uint8_t *ip_addr, uint16_t port, const uint8_t *buf, uint32_t len)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UDP Event callback function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>UDP socket handle of the local machine. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip_addr</td><td>Pointer to the IP address of the remote machine. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>UDP port number on the remote machine. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Pointer to buffer containing the received data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of bytes in the received packet. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>Currently not used. Reserved for future use.</em></dd></dl>
<p>Is the type definition for the UDP callback function. The Network Core calls the callback function whenever a UDP data packet is received. Users must provide the function.</p>
<p><b>Parameter for:</b></p>
<ul>
<li><a class="el" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a> </li>
</ul>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6f41cb30b833ea6b875dc770c40e6a5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> udp_close </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop UDP communication and close socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="rl__net_8h.html#a5675a3b88ee02986ae15ae3bb8135551">netStatus</a>.</dd></dl>
<p>The <b>udp_close</b> function closes the UDP socket identified in the function argument. After calling the <b>udp_close</b> function, the UDP socket cannot send or receive any data packet.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>After closing the UDP socket, you can reopen it using the <a class="el" href="group__udp__routines.html#gaaa448546b5d13fcd58aad9d488d72f1f">udp_open</a> function.</li>
<li>The UDP socket still reserves memory after calling the <b>udp_close</b> function. Hence, if you do not need the socket, you must release the memory using the <a class="el" href="group__udp__routines.html#gad420f69694d983a91066e8178a5df312">udp_release_socket</a> function after calling <b>udp_close</b>.</li>
</ul>
</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> disconnect_udp (int32_t udp_soc) {</div>
<div class="line">   ..</div>
<div class="line">  <span class="comment">// This UDP connection is no longer needed </span></div>
<div class="line">  <a class="code" href="group__udp__routines.html#ga6f41cb30b833ea6b875dc770c40e6a5e">udp_close</a> (udp_soc);</div>
<div class="line">  <a class="code" href="group__udp__routines.html#gad420f69694d983a91066e8178a5df312">udp_release_socket</a> (udp_soc);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga836d0644c9cbe14abee14a1127e112f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t * udp_get_buf </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate memory for UDP send buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of bytes to allocate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the allocated memory.</dd></dl>
<p>The function <b>udp_get_buf</b> allocates memory for the UDP send buffer into which your application can write the outgoing data packet.</p>
<p>The argument <em>size</em> specifies the number of data bytes that the application wants to send. When the UDP frame has been sent, the Network Core automatically de-allocates the memory used by the send buffer.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Your application must call the <b>udp_get_buf</b> function each time it wants to send a UDP data packet.</li>
<li>The total size of the allocated memory must not exceed the UDP Maximum Packet Size (1472 bytes).</li>
<li>Writing more data than the allocated size of the data buffer overwrites the Memory Manager Block links and causes the Network Core to crash.</li>
</ul>
</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> send_data () {</div>
<div class="line">  <span class="keywordtype">char</span> udp_msg[] = {<span class="stringliteral">&quot;Hello World!&quot;</span>};</div>
<div class="line">  <span class="keyword">const</span> uint8_t remip[4] = {192,168,1,100};</div>
<div class="line">  uint8_t *sendbuf;</div>
<div class="line">  uint32_t len;</div>
<div class="line"> </div>
<div class="line">  len = strlen (udp_msg);</div>
<div class="line">  sendbuf = <a class="code" href="group__udp__routines.html#ga836d0644c9cbe14abee14a1127e112f0">udp_get_buf</a> (len);</div>
<div class="line">  strcpy (sendbuf, udp_msg);</div>
<div class="line">  <span class="comment">// Send &#39;Hello World!&#39; to remote peer </span></div>
<div class="line">  <a class="code" href="group__udp__routines.html#ga9acc06602434d00a35d2e64a0549f137">udp_send</a> (udp_soc, remip, 1000, sendbuf, len);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga614107cc1ce34562e8b0a525917eb5ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t udp_get_socket </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>tos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__udp__routines.html#gab5b2151953e20bbc2b5ebd0c8c78f0d5">net_udp_cb_t</a>&#160;</td>
          <td class="paramname"><em>cb_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a free UDP socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tos</td><td>IP type of service:<ul>
<li>0 = default value. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opt</td><td>Checksum calculation option:<ul>
<li>UDP_OPT_SEND_CHECKSUM = Calculate transmit checksum.</li>
<li>UDP_OPT_VERIFY_CHECKSUM = Verify receive checksum.</li>
<li>0 = No checksum calculation. </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_func</td><td>event listening callback function. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>socket handle number or execution status:<ul>
<li>value &gt;= 0: socket handle number</li>
<li>value &lt; 0: error occurred, -value is execution status as defined with <a class="el" href="rl__net_8h.html#a5675a3b88ee02986ae15ae3bb8135551">netStatus</a></li>
</ul>
</dd></dl>
<p>The function <b>udp_get_socket</b> allocates a free UDP socket. It initializes all state variables of the UDP socket to the default state.</p>
<p>The argument <em>tos</em> specifies the IP Type Of Service. The most common value for <em>tos</em> is <span class="XML-Token">0</span>.</p>
<p>The argument <em>opt</em> specifies the checksum option as shown in the following table: </p>
<table class="doxtable">
<tr>
<th>Option Value </th><th>Description  </th></tr>
<tr>
<td><span class="XML-Token">UDP_OPT_SEND_CHECKSUM</span> </td><td>Calculate transmit checksum </td></tr>
<tr>
<td><span class="XML-Token">UDP_OPT_VERIFY_CHECKSUM</span></td><td>Verify receive checksum </td></tr>
<tr>
<td><span class="XML-Token">0</span> </td><td>No checksum calculation </td></tr>
</table>
<p>You can also set <b>opt</b> to <span class="XML-Token">UDP_OPT_SEND_CHECKSUM|UDP_OPT_VERIFY_CHECKSUM</span> to enable both options. This is recommended for a more secure UDP connection. You can also disable both options by setting <em>opt</em> to <span class="XML-Token">0</span> for fast system reaction time.</p>
<p>The argument <em>cb_func</em> is the event callback function of the UDP socket. Users must provide this function. Refer to <a class="el" href="group__udp__routines.html#gab5b2151953e20bbc2b5ebd0c8c78f0d5">net_udp_cb_t</a>.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>You must call the <b>udp_get_socket</b> function before any other function calls to the UDP socket.</li>
<li>Ethernet packets are also protected by the Ethernet CRC.</li>
<li>Packets can be modified when passing through routers, proxy servers, gateways, etc.</li>
<li>You must define the listener function to use with the UDP socket.</li>
</ul>
</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">int32_t udp_soc;</div>
<div class="line"> </div>
<div class="line">uint32_t udp_callback (int32_t socket, <span class="keyword">const</span> uint8_t *ip_addr, uint16_t port, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line">  <span class="comment">// This function is called when UDP data is received </span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Process received data from &#39;buf&#39; </span></div>
<div class="line">   ..</div>
<div class="line">  <span class="keywordflow">return</span> (0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line"> </div>
<div class="line">  init ();</div>
<div class="line">  <span class="comment">// Initialize the Network Core </span></div>
<div class="line">  <a class="code" href="group__net__system__functions.html#gac115122a03cf6b4b8874045f88e6ac5f">net_initialize</a> ();</div>
<div class="line">  udp_soc = <a class="code" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a> (0, <a class="code" href="rl__net_8h.html#a74810213cb986d3bd3558f5b99514155">UDP_OPT_SEND_CHECKSUM</a> | <a class="code" href="rl__net_8h.html#ab968ec8b0c4c6b8ef0d892351d7edcc2">UDP_OPT_VERIFY_CHECKSUM</a>, udp_callback);</div>
<div class="line">  <span class="keywordflow">if</span> (udp_soc &gt;= 0) {</div>
<div class="line">    <span class="comment">// Open UDP port 1000 for communication </span></div>
<div class="line">    <a class="code" href="group__udp__routines.html#gaaa448546b5d13fcd58aad9d488d72f1f">udp_open</a> (udp_soc, 1000);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    <span class="comment">// Run main Network Core &#39;thread&#39; </span></div>
<div class="line">    <a class="code" href="group__net__system__functions.html#gaafbf279f22e31e4822d9025b9e986d22">net_main</a> ();</div>
<div class="line">     ..</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gabe0998ea95189b5cedce153a5609aa28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> udp_multicast_ttl </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ttl</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set Time To Live value for multicast packets. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ttl</td><td>number of routers the packet can cross before being expired. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="rl__net_8h.html#a5675a3b88ee02986ae15ae3bb8135551">netStatus</a>.</dd></dl>
<p>The function <b>udp_multicast_ttl</b> sets the time to live (TTL) value for multicast packets of an UDP socket identified with a parameter <em>socket</em>. The argument <em>ttl</em> specifies the TTL value for the UDP socket (default value is 1). A TTL value controls the number of routers the packet can cross before being expired. If this function is not called, a default TTL value of 1 is assumed for all transmitted Multicast UDP datagrams.</p>
<dl class="section note"><dt>Note</dt><dd>This TTL value is not used for <b>unicast</b> UDP datagrams.</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"> ..</div>
<div class="line">udp_soc = <a class="code" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a> (0, <a class="code" href="rl__net_8h.html#a74810213cb986d3bd3558f5b99514155">UDP_OPT_SEND_CHECKSUM</a> | <a class="code" href="rl__net_8h.html#ab968ec8b0c4c6b8ef0d892351d7edcc2">UDP_OPT_VERIFY_CHECKSUM</a>, udp_callback);</div>
<div class="line"><span class="keywordflow">if</span> (udp_soc &gt;= 0) {</div>
<div class="line">  <span class="comment">// Open UDP port 1000 for communication </span></div>
<div class="line">  <a class="code" href="group__udp__routines.html#gaaa448546b5d13fcd58aad9d488d72f1f">udp_open</a> (udp_soc, 1000);</div>
<div class="line">  <span class="comment">// Let UDP Multicast datagrams cross a router. </span></div>
<div class="line">  <a class="code" href="group__udp__routines.html#gabe0998ea95189b5cedce153a5609aa28">udp_multicast_ttl</a> (udp_soc, 2);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gaaa448546b5d13fcd58aad9d488d72f1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> udp_open </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open UDP socket for communication. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>local port number or 0 for system assigned local port. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="rl__net_8h.html#a5675a3b88ee02986ae15ae3bb8135551">netStatus</a>.</dd></dl>
<p>The <b>udp_open</b> function opens the UDP socket identified by the argument <em>socket</em> for communication.</p>
<p>The argument <em>port</em> specifies the local port for sending and receiving data packets.</p>
<dl class="section note"><dt>Note</dt><dd>If you specify 0 for <em>port</em>, the Network Core automatically allocates the first free UDP port for communication.</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">int32_t udp_soc;</div>
<div class="line"> </div>
<div class="line">uint32_t udp_callback (int32_t socket, <span class="keyword">const</span> uint8_t *ip_addr, uint16_t port, <span class="keyword">const</span> uint8_t *buf, uint32_t len) {</div>
<div class="line">  <span class="comment">// This function is called when UDP data is received </span></div>
<div class="line">  <span class="comment">// Process received data from &#39;buf&#39; </span></div>
<div class="line">   ..</div>
<div class="line">  <span class="keywordflow">return</span> (0);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line"> </div>
<div class="line">  init ();</div>
<div class="line">  <span class="comment">// Initialize the Network Core</span></div>
<div class="line">  <a class="code" href="group__net__system__functions.html#gac115122a03cf6b4b8874045f88e6ac5f">net_initialize</a> ();</div>
<div class="line">  udp_soc = <a class="code" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a> (0, <a class="code" href="rl__net_8h.html#a74810213cb986d3bd3558f5b99514155">UDP_OPT_SEND_CHECKSUM</a> | <a class="code" href="rl__net_8h.html#ab968ec8b0c4c6b8ef0d892351d7edcc2">UDP_OPT_VERIFY_CHECKSUM</a>, udp_callback);</div>
<div class="line">  <span class="keywordflow">if</span> (udp_soc &gt;= 0) {</div>
<div class="line">    <span class="comment">// Open UDP port 1000 for communication </span></div>
<div class="line">    <a class="code" href="group__udp__routines.html#gaaa448546b5d13fcd58aad9d488d72f1f">udp_open</a> (udp_soc, 1000);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (1) {</div>
<div class="line">    <span class="comment">// Run main Network Core &#39;thread&#39; </span></div>
<div class="line">    <a class="code" href="group__net__system__functions.html#gaafbf279f22e31e4822d9025b9e986d22">net_main</a> ();</div>
<div class="line">     ..</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gad420f69694d983a91066e8178a5df312"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> udp_release_socket </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release UDP socket and free resources. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="rl__net_8h.html#a5675a3b88ee02986ae15ae3bb8135551">netStatus</a>.</dd></dl>
<p>The function <b>udp_release_socket</b> releases the <em>socket</em> and de-allocates its memory.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Once the socket is released, the Network Core can allocate the socket to another process.</li>
<li>You must call the <b>udp_release_socket</b> function when you do not need the UDP socket any longer.</li>
</ul>
</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> disconnect_udp (int32_t udp_soc) {</div>
<div class="line">   ..</div>
<div class="line">  <span class="comment">// This UDP connection is no longer needed </span></div>
<div class="line">  <a class="code" href="group__udp__routines.html#ga6f41cb30b833ea6b875dc770c40e6a5e">udp_close</a> (udp_soc);</div>
<div class="line">  <a class="code" href="group__udp__routines.html#gad420f69694d983a91066e8178a5df312">udp_release_socket</a> (udp_soc);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ga9acc06602434d00a35d2e64a0549f137"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__error__codes__net.html#ga5675a3b88ee02986ae15ae3bb8135551">netStatus</a> udp_send </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>ip_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data to a remote node. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>socket handle obtained with <a class="el" href="group__udp__routines.html#ga614107cc1ce34562e8b0a525917eb5ec">udp_get_socket</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ip_addr</td><td>IP address of the remote node. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>port number of the remote node to send data to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>buffer containing the data. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>length of data in bytes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>status code that indicates the execution status of the function as defined with <a class="el" href="rl__net_8h.html#a5675a3b88ee02986ae15ae3bb8135551">netStatus</a>.</dd></dl>
<p>The function <b>udp_send</b> sends the data packet to a remote machine. The argument <em>socket</em> specifies the socket handle to use for communication on the local machine. The argument <em>ip_addr</em> points to a buffer containing the four octets that make up the IP address of the remote machine. The argument <em>port</em> specifies the remote machine port to which to send the data packet. The argument <em>buf</em> points to the constructed UDP data packet. The argument <em>dlen</em> specifies the number of bytes in the data packet.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>You must allocate the memory using <a class="el" href="group__udp__routines.html#ga836d0644c9cbe14abee14a1127e112f0">udp_get_buf</a> before calling <b>udp_send</b>.</li>
<li>The buffer will be released, no matter if udp_send is successful or not.</li>
<li>udp_send does not send 0-length packets. It is possible to release a buffer that has been allocated, by simply calling udp_send with parameter len = 0.</li>
<li>The socket must already be open for communication before you can send data.</li>
<li>The same UDP socket, using the same local port, can communicate with several remote machines using UDP ports. The user application must handle proper multiplexing of outgoing packets and demultiplexing of received packets.</li>
</ul>
</dd></dl>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="rl__net_8h.html">rl_net.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> send_data () {</div>
<div class="line">  <span class="keywordtype">char</span> udp_msg[] = {<span class="stringliteral">&quot;Hello World!&quot;</span>};</div>
<div class="line">  <span class="keyword">const</span> uint8_t remip[4] = {192,168,1,100};</div>
<div class="line">  uint8_t *sendbuf;</div>
<div class="line">  uint32_t len;</div>
<div class="line"> </div>
<div class="line">  len = strlen (udp_msg);</div>
<div class="line">  sendbuf = <a class="code" href="group__udp__routines.html#ga836d0644c9cbe14abee14a1127e112f0">udp_get_buf</a> (len);</div>
<div class="line">  strcpy (sendbuf, udp_msg);</div>
<div class="line">  <span class="comment">// Send &#39;Hello World!&#39; to remote peer </span></div>
<div class="line">  <a class="code" href="group__udp__routines.html#ga9acc06602434d00a35d2e64a0549f137">udp_send</a> (udp_soc, remip, 1000, sendbuf, len);</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue May 25 2021 13:57:56 for Network Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
