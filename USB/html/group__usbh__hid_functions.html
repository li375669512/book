<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>HID: Human Interface Device Class</title>
<title>USB Component: HID: Human Interface Device Class</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber">Version 6.15.0</span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__usbh__hid_functions.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Content</a>  </div>
  <div class="headertitle">
<div class="title">HID: Human Interface Device Class<div class="ingroups"><a class="el" href="group__usbh___dev_class_functions.html">Device Class</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>USB Host functions to support Human Interface Device (HID) USB Devices.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Content</h2></td></tr>
<tr class="memitem:group__usbh__hid_functions__api"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hid_functions__api.html">User API</a></td></tr>
<tr class="memdesc:group__usbh__hid_functions__api"><td class="mdescLeft">&#160;</td><td class="mdescRight">User API reference of the Human Interface Device Class. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__usbh__hid_functions__conf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__usbh__hid_functions__conf.html">Configuration</a></td></tr>
<tr class="memdesc:group__usbh__hid_functions__conf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configuration of the USB Host HID Class in ÂµVision. <br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>USB Host functions to support Human Interface Device (HID) USB Devices. </p>
<p>The HID class in the USB Component is used for attaching input devices to your system.</p>
<p>Refer to:</p>
<ul>
<li><a class="el" href="_h_i_d.html">HID: Human Interface Device Class</a> for an overview of the HID class.</li>
<li><a class="el" href="host_hid_tutorial.html">USB Host Keyboard</a> for an example project that uses a HID-compliant keyboard as an input.</li>
</ul>
<p><b>Software Structure</b> <br/>
 The application starts the USB Host by calling <a class="el" href="group__usbh__core_functions__api.html#ga4420c0add78ae79e8e7ce035227ef4c5">USBH_Initialize</a>. The USB Host Core will wait until an USB HID device is attached to the system. As soon as this happens it will enumerate the device and it will be ready to be used by the application. The handling of the HID class events is implemented in USBH_HIDn_Thread.</p>
<p>The transmit functions <a class="el" href="group__usbh__hid_functions__api.html#ga35bdd4f4d943a627050ab052474eeadd">USBH_HID_Read</a> and <a class="el" href="group__usbh__hid_functions__api.html#ga3a2fb083a4f3a0118d06d68a9c56976f">USBH_HID_Write</a> will be called by the user thread directly to communicate with the HID device.</p>
<div align="center">
<img src="msc_inline_mscgraph_10.png" alt="msc_inline_mscgraph_10" border="0" usemap="#msc_inline_mscgraph_10.map"/>
<map name="msc_inline_mscgraph_10.map" id="msc_inline_mscgraph_10.map"><area href="group__usbh__core_functions__api.html#ga4420c0add78ae79e8e7ce035227ef4c5" shape="rect" coords="31,91,120,104" alt=""/>
<area href="group__usbh__hid_functions__api.html#ga35bdd4f4d943a627050ab052474eeadd" shape="rect" coords="37,263,114,276" alt=""/>
<area href="group__usbh__hid_functions__api.html#ga3a2fb083a4f3a0118d06d68a9c56976f" shape="rect" coords="34,314,117,327" alt=""/>
<area href="group__usbh__core_functions__api.html#gaf98f4e13ff57a8bf1c49cd46a8034d3f" shape="rect" coords="25,384,126,397" alt=""/>
</map>
</div>
<h2>Implementation </h2>
<p>To <a class="el" href="_u_s_b__host.html#Create_a_USB_Host_Application">create an USB Host</a> with support for the HID class:</p>
<ul>
<li>Select <b>USB:Host:HID</b> in the <a class="el" href="_u_s_b__device.html#RTE_Software_Component_Selection">RTE Component Selection</a>.</li>
<li>Configure the number of USB HID devices connected in the file <a class="el" href="group__usbh__hid_functions__conf.html">USBH_Config_HID.h</a>.</li>
</ul>
<p><b>Code Example</b> </p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main (<span class="keywordtype">void</span>) {</div>
<div class="line">  usbStatus usb_status;                 <span class="comment">// USB status</span></div>
<div class="line">  <span class="keywordtype">int</span>       status;                     <span class="comment">// Generic status</span></div>
<div class="line">  <span class="keywordtype">int</span>       ch;                         <span class="comment">// Character</span></div>
<div class="line">  uint8_t   con = 0U;                   <span class="comment">// Connection status of keyboard</span></div>
<div class="line"> </div>
<div class="line">  SystemCoreClockUpdate();              <span class="comment">// Update system clock</span></div>
<div class="line"> </div>
<div class="line">  status = stdout_init ();              <span class="comment">// Initialize retargeted stdout</span></div>
<div class="line">  <span class="keywordflow">if</span> (status != 0) {</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {}                         <span class="comment">// Handle stdout init failure</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  usb_status = <a class="code" href="group__usbh__core_functions__api.html#ga4420c0add78ae79e8e7ce035227ef4c5">USBH_Initialize</a> (0U);    <span class="comment">// Initialize USB Host 0</span></div>
<div class="line">  <span class="keywordflow">if</span> (usb_status != usbOK) {</div>
<div class="line">    <span class="keywordflow">for</span> (;;) {}                         <span class="comment">// Handle USB Host 0 init failure</span></div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (;;) {</div>
<div class="line">    usb_status= <a class="code" href="group__usbh__hid_functions__api.html#ga87af2b86ae68781e915cc887d9c6ac67">USBH_HID_GetStatus</a>(0U); <span class="comment">// Get HID device status</span></div>
<div class="line">    <span class="keywordflow">if</span> (usb_status == usbOK) {</div>
<div class="line">      <span class="keywordflow">if</span> (con == 0U) {                  <span class="comment">// If keyboard was not connected previously</span></div>
<div class="line">        con = 1U;                       <span class="comment">// Keyboard got connected</span></div>
<div class="line">        printf (<span class="stringliteral">&quot;Connect!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (con == 1U) {                  <span class="comment">// If keyboard was connected previously</span></div>
<div class="line">        con = 0U;                       <span class="comment">// Keyboard got disconnected</span></div>
<div class="line">        printf (<span class="stringliteral">&quot;\nDisconnect!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (con != 0U) {                    <span class="comment">// If keyboard is active</span></div>
<div class="line">      ch = <a class="code" href="group__usbh__hid_functions__api.html#ga26b69d81b39f1f13c1fa7e8fec33507e">USBH_HID_GetKeyboardKey</a> (0U);<span class="comment">// Get pressed key</span></div>
<div class="line">      <span class="keywordflow">if</span> (ch != -1) {                   <span class="comment">// If valid key value</span></div>
<div class="line">        <span class="keywordflow">if</span> ((ch &amp; 0x10000) != 0) {      <span class="comment">// Handle non-ASCII translated keys (Keypad 0 .. 9)</span></div>
<div class="line">                                        <span class="comment">// Bit  16:    non-ASCII bit (0 = ASCII, 1 = not ASCII)</span></div>
<div class="line">                                        <span class="comment">// Bits 15..8: modifiers (SHIFT, ALT, CTRL, GUI)</span></div>
<div class="line">                                        <span class="comment">// Bits  7..0: ASCII or HID key Usage ID if not ASCII</span></div>
<div class="line">          ch &amp;= 0xFF;                   <span class="comment">// Remove non-ASCII bit and modifiers</span></div>
<div class="line">          <span class="keywordflow">if</span> ((ch&gt;=0x59)&amp;&amp;(ch&lt;=0x61)) { <span class="comment">// Keypad 1 .. 9 key convert to</span></div>
<div class="line">            ch = (ch - 0x59) + <span class="charliteral">&#39;1&#39;</span>;     <span class="comment">// ASCII  1 .. 9</span></div>
<div class="line">          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ch == 0x62) {      <span class="comment">// Keypad 0 key convert to</span></div>
<div class="line">            ch = <span class="charliteral">&#39;0&#39;</span>;                   <span class="comment">// ASCII  0</span></div>
<div class="line">          } <span class="keywordflow">else</span> {                      <span class="comment">// If not Keypad 0 .. 9</span></div>
<div class="line">            ch = -1;                    <span class="comment">// invalidate the key</span></div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> ((ch &gt; 0) &amp;&amp; (ch &lt; 128)) {   <span class="comment">// Output ASCII 0 .. 127 range</span></div>
<div class="line">          putchar(ch);</div>
<div class="line">          fflush(stdout);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    osDelay(10U);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue May 25 2021 13:57:51 for USB Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
