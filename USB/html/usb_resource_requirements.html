<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Resource Requirements</title>
<title>USB Component: Resource Requirements</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">USB Component
   &#160;<span id="projectnumber">Version 6.15.0</span>
   </div>
   <div id="projectbrief">MDK Middleware for USB Device and Host Communication</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('usb_resource_requirements.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Resource Requirements </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This section describes the resource requirements of the USB component.</p>
<h1><a class="anchor" id="usbd_res_req"></a>
USB Device Resource Requirements</h1>
<p>The following section documents the requirements for the <b>USB Device</b> component. The actual requirements depend on the components used in the application and the configuration of these components.</p>
<h2><a class="anchor" id="usbd_stack_req"></a>
Stack Requirements</h2>
<p>The USB Device Core receives events sent from the interrupt service routine (ISR) of the <b>USB Device Driver</b>. The stack requirements for the ISR are typically less than 512 Bytes. The total stack space required for ISR depends on the interrupt nesting and therefore on the priority settings of these ISR. The stack requirements for ISR are configured in the <script>link_ext('startup_device');</script> file located under the <b>Device</b> component class.</p>
<table class="doxtable">
<tr>
<th align="left">Option (under section Stack Configuration) </th><th align="left">Increase Value by  </th></tr>
<tr>
<td align="left">Stack Size (in Bytes) </td><td align="left">+ 512 for USB Device Driver </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>When using a CMSIS-RTOS, the Stack Size in the startup_<em>device</em>.s file configures only the stack space that is used by exception and interrupt service routines of the drivers. The stack size requirements depend on the maximum nesting of exception and ISR execution and therefore on the priority settings of the various interrupt and exception sources.</dd></dl>
<p>User code that calls API functions of the USB Device Component should have a minimum of 512 Bytes of stack space available. Since API functions are frequently called from threads, the thread stack size should be at least 512 Bytes (see below).</p>
<h2><a class="anchor" id="usbd_rtos_req"></a>
CMSIS-RTOS Requirements</h2>
<p>Currently, the USB Device component works in four different RTOS configurations:</p>
<ol type="1">
<li><b>CMSIS-RTOS2 RTX5</b>: This mode uses Keil RTX5 natively. In the Manage Run-Time Environment window, the component <b>CMSIS:RTOS2 (API):Keil RTX5</b> must be selected. The RTOS resources are static, configured by the system. There is <b>no need for additional user configuration</b>. This is the suggested option for new development.</li>
<li><b>CMSIS-RTOS RTX5</b>: this mode uses RTX5 under a compatibility layer, which uses CMSIS-RTOS v1. In the Manage Run-Time Environment window, the components <b>CMSIS:RTOS (API):Keil RTX5</b> and <b>CMSIS:RTOS2 (API):Keil RTX5</b> must be selected.</li>
<li><b>CMSIS-RTOS RTX</b>: In the Manage Run-Time Environment window, the component <b>CMSIS:RTOS (API):Keil RTX</b> must be selected. For the RTOS configuration, please refer to section <a class="el" href="usb_resource_requirements.html#usbd_req_rtx4">RTX v4 Requirements</a>.</li>
<li><b>CMSIS-RTOS2 with a generic RTOS</b>: this mode uses a generic RTOS (such as FreeRTOS). The RTOS resources (thread, mutex and semaphore control blocks and thread stacks) are dynamically allocated. The user needs to provide memory pools big enough for the allocations in RTOS configuration.</li>
</ol>
<p>The USB Device component uses threads. Each instance of a component starts its own threads, for example two HID instances start two threads with the name: <em>USBD_HID0_Thread</em>, <em>USBD_HID1_Thread</em>. The thread execution starts with <a class="el" href="group__usbd__core_functions__api.html#ga65ba44a47e3fa46a15f70bab9917c8ca">USBD_Initialize</a>.</p>
<p>The following table lists the components, number of threads, thread name, default thread priority, default stack size and the configuration file with <b>OS Resource Settings</b> for stack size adjustments.</p>
<table class="doxtable">
<tr>
<th align="left">Component </th><th align="left">Number of Threads </th><th align="left">Thread Name </th><th align="center">Default Priority </th><th align="center">Default Stack Size </th><th align="left">Configuration File  </th></tr>
<tr>
<td align="left"><b>::USB:Device</b> </td><td align="left">1 </td><td align="left">USBD<em>n</em>_Core_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBD_Config_<em>n</em>.c </td></tr>
<tr>
<td align="left"><b>::USB:Device:ADC</b> </td><td align="left">1 </td><td align="left">USBD_ADC<em>n</em>_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBD_Config_ADC_<em>n</em>.c </td></tr>
<tr>
<td align="left"><b>::USB:Device:CDC</b> </td><td align="left">2 </td><td align="left">USBD_CDC<em>n</em>_Bulk_Thread, USBD_CDC<em>n</em>_Int_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBD_Config_CDC_<em>n</em>.c </td></tr>
<tr>
<td align="left"><b>::USB:Device:Custom Class</b> </td><td align="left">1...15 </td><td align="left">USBD_CustomClass<em>n</em>_EP<em>m</em>_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBD_Config_CustomClass_<em>n</em>.c </td></tr>
<tr>
<td align="left"><b>::USB:Device:HID</b> </td><td align="left">1 </td><td align="left">USBD_HID<em>n</em>_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBD_Config_HID_<em>n</em>.c </td></tr>
<tr>
<td align="left"><b>::USB:Device:MSC</b> </td><td align="left">1 </td><td align="left">USBD_MSC<em>n</em>_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBD_Config_MSC_<em>n</em>.c </td></tr>
</table>
<p><em>n</em> is instance number, <em>m</em> is Endpoint number 1...15</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>For <b>::USB:Device:Custom Class</b> each endpoint In/Out pair executes in separate thread. The number of threads depends on the number of endpoints enabled in the configuration file USBD_Config_CustomClass_<em>n</em>.c.</li>
<li>The <b>Default Stack Size</b> in the table above can be changed in the USB configuration files (for example USBD_Config_<em>n</em>.c and USBD_Config_<em>DeviceClass_n</em>.c). At the end of each configuration file, you will find <b>OS Resource Settings</b> and below that the value for the <b>Thread stack size</b>.</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="usbd_req_rtx5"></a>
RTX v5 Requirements</h2>
<p>The USB Device component allocates all necessary resources statically so no changes to RTX settings are necessary.</p>
<h2><a class="anchor" id="usbd_req_rtx4"></a>
RTX v4 Requirements</h2>
<p>For the USB Device component, the number of threads and thread stack size requirements are calculated as follows:</p>
<ul>
<li><b>Number of Threads</b>: add all threads of enabled components listed above.</li>
<li><b>Total stack size</b>: add the stack sizes of the related threads.</li>
</ul>
<p>With default stack size of 512 Bytes, the <b>Total stack size</b> is <b>Number of Threads</b> * 512 Bytes. When the default <b>OS Resource Settings</b> are modified, the changes need to be considered for the calculation of the <b>Total stack size</b>.</p>
<p><b>Examples</b> (with default stack size of 512 Bytes):</p>
<ul>
<li>USB Device with HID uses 2 threads (1 for USB Device + 1 for HID) and 1024 Bytes stack.</li>
<li>Composite USB Device with HID <em>and</em> MSC uses 3 threads (1 for USB Device + 1 for HID + 1 for MSC) and 1536 Bytes stack.</li>
<li>USB Device with CDC uses 3 threads (1 for USB Device + 2 for CDC) and 1536 Bytes stack.</li>
<li>USB Device with Custom Class that has 3 endpoints uses 4 threads (1 for USB Device + 3 for Custom Class) and 2048 Bytes stack.</li>
</ul>
<p>Requirements are configured in the <script>link_ext('RTX-Conf-CM4');</script> file located under the <b>CMSIS</b> component class:</p>
<ul>
<li>Thread Configuration <table class="doxtable">
<tr>
<th align="left">Option </th><th align="left">Value  </th></tr>
<tr>
<td align="left">Number of concurrent running user threads </td><td align="left">+ <b>Number of Threads</b> </td></tr>
<tr>
<td align="left">Number of threads with user-provided stack size </td><td align="left">+ <b>Number of Threads</b> </td></tr>
<tr>
<td align="left">Total stack size [bytes] for threads with user-provided stack size </td><td align="left">+ <b>Total stack size</b> </td></tr>
</table>
</li>
<li>System Configuration (if HID class is used) <table class="doxtable">
<tr>
<th align="left">Option </th><th align="left">Value  </th></tr>
<tr>
<td align="left">User Timers </td><td align="left">Enable </td></tr>
</table>
</li>
</ul>
<p><b>Timers</b> </p>
<p>The <b>::USB:Device:HID</b> component requires timers which need to be enabled in RTOS.</p>
<p><b>Semaphores</b> </p>
<p>Number of semaphores used by the USB Device components:</p>
<table class="doxtable">
<tr>
<th align="left">Component </th><th align="left">Number of Semaphores per instance  </th></tr>
<tr>
<td align="left"><b>::USB:Device</b> </td><td align="left">3 </td></tr>
<tr>
<td align="left"><b>::USB:Device:ADC</b> </td><td align="left">1..2 </td></tr>
<tr>
<td align="left"><b>::USB:Device:CDC</b> </td><td align="left">3 </td></tr>
<tr>
<td align="left"><b>::USB:Device:Custom Class</b> </td><td align="left">1..30 </td></tr>
<tr>
<td align="left"><b>::USB:Device:HID</b> </td><td align="left">1 + 1..2 </td></tr>
<tr>
<td align="left"><b>::USB:Device:MSC</b> </td><td align="left">2 </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>For values specified as range (..) one semaphore per endpoint is used. </dd>
<dd>
For example if custom class uses one Endpoint In and one Endpoint Out two additional semaphores are allocated and used.</dd></dl>
<h2><a class="anchor" id="usbd_mem_req"></a>
Memory Requirements</h2>
<p>The following table shows the memory requirements for read-only (Flash) and read-write (RAM) memory. These numbers may be used to estimate the total size requirements of the application, but the actual numbers depend on compiler optimizations and target processor and may be therefore slightly different.</p>
<table class="doxtable">
<tr>
<th align="left">Component </th><th align="center">RO Memory [Bytes] </th><th align="left">RW Memory (Data) [Bytes]  </th></tr>
<tr>
<td align="left"><b>::USB:Core</b> (Device) </td><td align="center">6.0 k </td><td align="left">&lt; 470 </td></tr>
<tr>
<td align="left"><b>::USB:Device:ADC</b> </td><td align="center">2.5 k </td><td align="left">&lt; 110 + <em>Audio Subframe Sizes</em> * <em>Buffer Sizes</em> (configured in the USBD_Config_ADC_<em>n</em>.h) </td></tr>
<tr>
<td align="left"><b>::USB:Device:HID</b> </td><td align="center">2.7 k </td><td align="left">&lt; 130 + <em>Maximum Report Sizes</em> (configured in the USBD_Config_HID_<em>n</em>.h) </td></tr>
<tr>
<td align="left"><b>::USB:Device:MSC</b> </td><td align="center">4.1 k </td><td align="left">&lt; 160 + <em>Maximum Bulk Buffer Size</em> (configured in the USBD_Config_MSC_<em>n</em>.h) </td></tr>
<tr>
<td align="left"><b>::USB:Device:CDC ACM</b> </td><td align="center">3.2 k </td><td align="left">&lt; 220 + <em>Maximum Send/Receive Buffer Sizes</em> (configured in the USBD_Config_CDC_<em>n</em>.h) </td></tr>
<tr>
<td align="left"><b>::USB:Device:Custom Class</b> </td><td align="center">2.0 k </td><td align="left">&lt; 80 </td></tr>
<tr>
<td align="left"><b>USB Device Driver</b> </td><td align="center">1 .. 4 k </td><td align="left">0.5 .. 4 k </td></tr>
</table>
<h1><a class="anchor" id="usbh_res_req"></a>
USB Host Resource Requirements</h1>
<p>The following section documents the requirements for the <b>USB Host</b> component. The actual requirements depend on the components used in the application and the configuration of these components.</p>
<h2><a class="anchor" id="usbh_stack_req"></a>
Stack Requirements</h2>
<p>The USB Host Core receives events sent from the interrupt service routine (ISR) of the USB Host Driver. The stack requirements for the ISR are typically less than 512 Bytes. The total stack space required for ISR depends on the interrupt nesting and therefore on the priority settings of these ISR. The stack requirements for ISR is configured in the startup_<em>device</em>.s file located in the <b>Device</b> components.</p>
<table class="doxtable">
<tr>
<th align="left">Option (under section Stack Configuration) </th><th align="left">Increase Value by  </th></tr>
<tr>
<td align="left">Stack Size (in Bytes) </td><td align="left">+ 512 for USB Host Driver </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>When using a CMSIS-RTOS, the Stack Size in the startup_<em>device</em>.s file configures only the stack space that is used by exception and interrupt service routines. The stack size requirements depend on the maximum nesting of exception and ISR execution and therefore on the priority settings of the various interrupt and exception sources.</dd></dl>
<p>User code that calls API functions of the USB Host Component should have a minimum of 512 Bytes of stack space available. Since API functions are frequently called from threads, the thread stack size should be at least 512 Bytes.</p>
<h2><a class="anchor" id="usbh_rtos_req"></a>
CMSIS-RTOS Requirements</h2>
<p>Currently, the USB Host component works in four different RTOS configurations:</p>
<ol type="1">
<li><b>CMSIS-RTOS2 RTX5</b>: This mode uses Keil RTX5 natively. In the Manage Run-Time Environment window, the component <b>CMSIS:RTOS2 (API):Keil RTX5</b> must be selected. The RTOS resources are static, configured by the system. There is <b>no need for additional user configuration</b>. This is the suggested option for new development.</li>
<li><b>CMSIS-RTOS RTX5</b>: this mode uses RTX5 under a compatibility layer, which uses CMSIS-RTOS v1. In the Manage Run-Time Environment window, the components <b>CMSIS:RTOS (API):Keil RTX5</b> and <b>CMSIS:RTOS2 (API):Keil RTX5</b> must be selected.</li>
<li><b>CMSIS-RTOS RTX</b>: In the Manage Run-Time Environment window, the component <b>CMSIS:RTOS (API):Keil RTX</b> must be selected. For the RTOS configuration, please refer to section <a class="el" href="usb_resource_requirements.html#usbh_req_rtx4">RTX v4 Requirements</a>.</li>
<li><b>CMSIS-RTOS2 with a generic RTOS</b>: this mode uses a generic RTOS (such as FreeRTOS). The RTOS resources (thread, mutex and semaphore control blocks and thread stacks) are dynamically allocated. The user needs to provide memory pools big enough for the allocations in RTOS configuration.</li>
</ol>
<p>The USB Host component uses threads. Each USB Host instance starts its own thread (USBH<em>n</em>_Core_Thread). The thread execution starts with <a class="el" href="group__usbh__core_functions__api.html#ga4420c0add78ae79e8e7ce035227ef4c5">USBH_Initialize</a>. Additionally each instance of HID and CDC class also start their own thread (USBH_HIDn_IntIn_Thread or USBH_CDCn_IntIn_Thread) when HID or CDC device is connected.</p>
<p>The following table lists the components, number of threads, thread name, default thread priority, default stack size and the configuration file with <b>OS Resource Settings</b> for stack size adjustments.</p>
<table class="doxtable">
<tr>
<th align="left">Component </th><th align="left">Number of Threads </th><th align="left">Thread Name </th><th align="center">Default Priority </th><th align="center">Default Stack Size </th><th align="left">Configuration File  </th></tr>
<tr>
<td align="left"><b>::USB:Host</b> </td><td align="left">1 </td><td align="left">USBH<em>n</em>_Core_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">1024 Bytes </td><td align="left">USBH_Config_<em>n</em>.c </td></tr>
<tr>
<td align="left"><b>::USB:Host:CDC</b> </td><td align="left">1 </td><td align="left">USBH_CDC<em>n</em>_IntIn_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBH_Config_CDC.h </td></tr>
<tr>
<td align="left"><b>::USB:Host:HID</b> </td><td align="left">1 </td><td align="left">USBH_HID<em>n</em>_IntIn_Thread </td><td align="center"><code>osPriorityAboveNormal</code> </td><td align="center">512 Bytes </td><td align="left">USBH_Config_HID.h </td></tr>
</table>
<p><em>n</em> is instance number</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The <b>Default Stack Size</b> in the table above can be changed in the USB configuration files (for example USBH_Config_<em>n</em>.c and USBH_Config_<em>DeviceClass</em>.c). At the end of each configuration file, you will find <b>OS Resource Settings</b> and below that the value for the <b>Thread stack size</b>.</li>
<li>If File System is used retargeted to USB Host Mass Storage the stack size for thread calling File System functions should be at least 1536 Bytes.</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="usbh_req_rtx5"></a>
RTX v5 Requirements</h2>
<p>The USB Host component allocates all necessary resources statically so no changes to RTX settings are necessary.</p>
<h2><a class="anchor" id="usbh_req_rtx4"></a>
RTX v4 Requirements</h2>
<p>For the USB Host component, the number of threads and thread stack size requirements are calculated as follows:</p>
<ul>
<li><b>Number of Threads</b>: add all threads of enabled components listed above.</li>
<li><b>Total stack size</b>: add the stack sizes of the related threads.</li>
</ul>
<p>With default stack sizes as defined above the <b>Total stack size</b> is sum of <b>Default Stack Sizes</b>. When the default <b>OS Resource Settings</b> are modified, the changes need to be considered for the calculation of the <b>Total stack size</b>.</p>
<p><b>Examples</b> (with default stack sizes):</p>
<ul>
<li>Single USB Host with MSC uses 1 thread (for USB Host) and 1024 Bytes stack.</li>
<li>Single USB Host with MSC and single HID instance uses 2 threads (1 for USB Host + 1 for HID) and 1536 Bytes stack.</li>
<li>Dual USB Host with MSC and two HID instances uses 4 threads (2 for USB Host + 2 for HID) and 3072 Bytes stack.</li>
</ul>
<p>Requirements are configured in the <script>link_ext('RTX-Conf-CM4');</script> file located under the <b>CMSIS</b> component class:</p>
<ul>
<li>Thread Configuration <table class="doxtable">
<tr>
<th align="left">Option </th><th align="left">Value  </th></tr>
<tr>
<td align="left">Number of concurrent running user threads </td><td align="left">+ <b>Number of Threads</b> </td></tr>
<tr>
<td align="left">Number of threads with user-provided stack size </td><td align="left">+ <b>Number of Threads</b> </td></tr>
<tr>
<td align="left">Total stack size [bytes] for threads with user-provided stack size </td><td align="left">+ <b>Total stack size</b> </td></tr>
</table>
</li>
<li>System Configuration <table class="doxtable">
<tr>
<th align="left">Option </th><th align="left">Value  </th></tr>
<tr>
<td align="left">User Timers </td><td align="left">Enable </td></tr>
</table>
</li>
</ul>
<p><b>Timers</b> </p>
<p>The <b>::USB:Host</b> component requires timers which need to be enabled in RTOS.</p>
<p><b>Semaphores</b> </p>
<p>The <b>::USB:Host</b> component uses one semaphore per instance.</p>
<p><b>Mutexes</b> </p>
<p>The <b>::USB:Host</b> component uses one mutex per instance.</p>
<dl class="section note"><dt>Note</dt><dd>If custom class component is used, user must insure pipe operations on the same pipe are not interrupted.</dd></dl>
<p><b>Signals</b> </p>
<p>Any user thread using USB Host transfer functions is blocked internally in the library by waiting on signals. <b>Signals (bits 0. to 12.) are reserved for the USB Host communication and must not be used by the user application in that thread</b>.</p>
<h2><a class="anchor" id="usbh_mem_req"></a>
Memory Requirements</h2>
<p>The following table shows the memory requirements for read-only (Flash) and read-write (RAM) memory. These numbers may be used to estimate the total size requirements of the application, but the actual numbers depend on compiler optimizations and target processor and may be therefore slightly different.</p>
<table class="doxtable">
<tr>
<th align="left">Component </th><th align="center">RO Memory [Bytes] </th><th align="center">RW Memory (Data) [Bytes]  </th></tr>
<tr>
<td align="left"><b>::USB:Core</b> (Host) </td><td align="center">&lt; 9.5 k </td><td align="center">&lt; 370 + <em>Memory Pool Size</em> (configured in the USBH_Config_<em>n</em>.c) </td></tr>
<tr>
<td align="left"><b>::USB:Host:HID</b> </td><td align="center">&lt; 1.3 k </td><td align="center">&lt; 70 </td></tr>
<tr>
<td align="left"><b>::USB:Host:MSC</b> </td><td align="center">&lt; 3.4 k </td><td align="center">&lt; 40 </td></tr>
<tr>
<td align="left"><b>::USB:Host:CDC</b> </td><td align="center">&lt; 1.0 k </td><td align="center">&lt; 30 </td></tr>
<tr>
<td align="left"><b>USB Host OHCI</b> support </td><td align="center">&lt; 3.5 k </td><td align="center">&lt; 0.5 k </td></tr>
<tr>
<td align="left"><b>USB Host EHCI</b> support </td><td align="center">&lt; 5.0 k </td><td align="center">&lt; 4.5 k </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue May 25 2021 13:57:47 for USB Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
