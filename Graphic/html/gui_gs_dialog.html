<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Create a Dialog Application</title>
<title>Graphics Component: Create a Dialog Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="drv.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="printComponentTabs.js"></script>
<script type="text/javascript" src="URL_keys.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="stylsheetf" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectlogo"><img alt="Logo" src="keilarm.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Graphics Component
   &#160;<span id="projectnumber">Version 6.16.3</span>
   </div>
   <div id="projectbrief">MDK Middleware for Graphical User Interfaces</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="DRVnav" class="tabs1">
    <ul class="tablist">
      <script type="text/javascript">
		<!--
		writeComponentTabs.call(this);
		//-->
      </script>
	  </ul>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Usage&#160;and&#160;Description</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('gui_gs_dialog.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Create a Dialog Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The steps to create a microcontroller application with Graphical User Interface are:</p>
<ul>
<li>Select <a class="el" href="gui_gs_dialog.html#RTE_Software_Component_Selection_GUI">RTE Components</a> required.</li>
<li><a class="el" href="gui_gs_dialog.html#RTE_Add_Template_GUI">Add and Configure the GUI Template</a></li>
<li><a class="el" href="gui_gs_dialog.html#RTE_Configure_Memory_GUI">Configure the Memory for the Component</a></li>
<li><a class="el" href="gui_gs_dialog.html#RTE_DialogDesign_GUI">Design a Dialog and Include in the Application</a></li>
</ul>
<p>Refer to <a class="el" href="gui_documentation.html#gui_emwin_support">Support in MDK-Professional</a> for a list of supported emWin components and drivers.</p>
<h1><a class="anchor" id="RTE_Software_Component_Selection_GUI"></a>
RTE Component Selection</h1>
<p>Only a few steps are necessary to complete the RTE Component selection:</p>
<ul>
<li>From the Graphics Component:<ul>
<li>Select <b>Graphics:CORE</b> that provides the full emWin library.</li>
<li>From the <b>Display (API)</b> select the preconfigured LCD Interface for your platform. If you are running on unsupported or custom hardware select the <b>Interface Template</b>. The <a class="el" href="gui_documentation.html">User and Reference Guide</a> - <em>34.4.2 Customizing LCDConf.c</em> describes how to customize the <b>Interface Template</b>.</li>
<li>Optionally you can now also add a Pointer Input Device like <b>Joystick</b> or <b>Touch</b> if present on your hardware.</li>
</ul>
</li>
<li>From Board Support:<ul>
<li>Enable <b>emWin LCD</b>. If there's no board support available for your development environment, refer to the <a class="el" href="gui_documentation.html">User and Reference Guide</a> - <em>31. Display drivers</em> on how to create a suitable LCD driver.</li>
<li>Enable <b>Touchscreen</b>. If there's no board support available for your development environment, refer to the <a class="el" href="gui_documentation.html">User and Reference Guide</a> - <em>24.4 Touch screen driver</em> on how to create a suitable touchscreen driver.</li>
</ul>
</li>
</ul>
<div class="image">
<img src="gui_compononent_selection.png" alt="gui_compononent_selection.png"/>
<div class="caption">
RTE Component Selection</div></div>
<h1><a class="anchor" id="RTE_Add_Template_GUI"></a>
Add and Configure the GUI Template</h1>
 <script>link_ext('uv4_ca_sourcefiles');</script> files provide templates for running an application using the Graphic component. The following templates are available for the Graphic component (refer to <a class="el" href="gui_exec_model.html">Execution Models</a> for further information):</p>
<table class="doxtable">
<tr>
<th>Template Name </th><th>Purpose  </th></tr>
<tr>
<td>GUI_SingleThread.c </td><td>GUI Thread for Single-Task Execution Model </td></tr>
<tr>
<td>GUI_MultiThread.c </td><td>GUI Thread for Multiple-Task Execution Model </td></tr>
<tr>
<td>GUI_TemplateThread.c </td><td>Thread to run emWin Demos or Templates </td></tr>
</table>
<p>To integrate a User Code Template in your application, follow these steps:</p>
<ul>
<li><p class="startli">Open the <b>Add New Item ...</b> dialog by right-clicking a source group in your project. Select the Template <b>emWin GUI Thread for Single-Tasking Execution Model</b> from the <b>User Code Template</b> section.</p>
<div class="image">
<img src="AddItem.png" alt="AddItem.png"/>
<div class="caption">
Add Template</div></div>
<ul>
<li>To start the graphics component just call <em>Init_GUIThread();</em> from your main task.</li>
<li>The <em>GUIThread</em> requires some additional resources from your CMSIS-RTOS Kernel.</li>
</ul>
</li>
</ul>
<p>In case <b>RTX v5</b> is used <b>no changes to RTX settings</b> are necessary as all resources are allocated statically. In case <b>RTX v4</b> is used you need to change following settings in <script>link_ext('RTX-Conf-CM4');</script> file:</p>
<table class="doxtable">
<tr>
<th align="left">Additional RTOS Kernel Resources </th><th align="right">Value to add to existing resources  </th></tr>
<tr>
<td align="left">Number of concurrent running threads </td><td align="right">+1 </td></tr>
<tr>
<td align="left">Number of threads with user-provided stack size </td><td align="right">+1 </td></tr>
<tr>
<td align="left">Total stack size [bytes] for threads with user-provided stack size </td><td align="right">+2048 Bytes </td></tr>
</table>
<h1><a class="anchor" id="RTE_Configure_Memory_GUI"></a>
Configure the Memory for the Component</h1>
<p>The Graphics Component has some increased resource requirements. In most cases you will allocate external RAM (or some separate RAM area on your device) for the GUI buffer.</p>
<ul>
<li>Open <b>GUIConf.c</b> for editing. Set the GUI_NUMBYTES define to 0x4000. This will be sufficient for simple GUI dialogs. If you are increasing complexity of your GUI you also need to increase this buffer size.</li>
<li>Run the <b>Options for Component</b> dialog from the context menu of the file <b>GUIConf.c</b>.</li>
</ul>
<div class="image">
<img src="OptionsForComponent.png" alt="OptionsForComponent.png"/>
<div class="caption">
Context Menu</div></div>
<ul>
<li>In the Options for Component dialog select the RAM area you want to use for the Core Component. This will relocate the buffer in the selected area.</li>
</ul>
<div class="image">
<img src="OptionsForComponent2.png" alt="OptionsForComponent2.png"/>
<div class="caption">
Options for Component Dialog</div></div>
<h2>CMSIS-RTOS Requirements </h2>
<p>If you are using a touch-screen device then timers need to be enabled in RTOS. Also, an additional <b>1024 Bytes</b> of stack for the <b>Timer Thread Stack size [bytes]</b> is required.</p>
<p>For more information, check the Graphic component's <a class="el" href="graphic_resource_requirements.html">Resource Requirements</a> section.</p>
<h1><a class="anchor" id="RTE_DialogDesign_GUI"></a>
Design a Dialog and Include in the Application</h1>
<ul>
<li>Create a new <b>Framewin</b> by clicking the icon on the toolbar. Adjust the properties. First you need to rename the Framewin object. In this example we call it "myDialog". The name of the root object will also be reflected in the generated source file name.</li>
<li>Adjust the xSize and ySize to fit onto your display area. If the dialog is larger than your display it will be truncated.</li>
<li>Add elements of your choice using the GUIBuilder toolbar. Here we add a button called "Button".</li>
</ul>
<div class="image">
<img src="GuiBuilder.png" alt="GuiBuilder.png"/>
<div class="caption">
The GUIBuilder Utility</div></div>
<ul>
<li>Once you are done, save the file (<b>File-Save...</b>). A new file called <em>myDialog.c</em> will be created.</li>
<li>Add this file to a source group in your project using the context menu:</li>
</ul>
<div class="image">
<img src="AddDialog.png" alt="AddDialog.png"/>
<div class="caption">
Source Group - Add Existing Files...</div></div>
<ul>
<li>Open <b>GUI_SingleThread.c</b> in the editor. Add <em>#include "dialog.h"</em> to the includes. In the GUIThread thread loop call <em>CreatemyDialog();</em> <br/>
 You will also need to add an <code>extern</code> declaration <em>WM_HWIN CreatemyDialog(void);</em></li>
</ul>
<p>The Graphics Component is now completely integrated in your application. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li>
    <li class="footer">Generated on Tue May 25 2021 13:57:28 for Graphics Component by ARM Ltd. All rights reserved.
	<!--
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 
	-->
	</li>
  </ul>
</div>
</body>
</html>
